(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221e02"],{cbe2:function(e,t,o){"use strict";o.r(t);var a=o("034c"),r=o("ea40");function n(){var e,t,o,a,n=this,i=n.config,l=n.getChildren("legend")&&n.getChildren("legend")[0],s=n.getChildren("gLegend")&&n.getChildren("gLegend")[0],c=n.getFromEnv("dataSource").colorrange,d=i.hasLegend,g={},h=n.hasGradientLegend,b=n.getFromEnv("dataSource").chart,p=Object(r["Kb"])(b.mapbycategory,0),u=h&&c&&Object(r["Kb"])(c.gradient);u&&!p?(e=s.conf,h=!0,i.gLegendEnabled=!0,a=.5,t=e.legendPosition):(e=l&&l.config,h=!1,i.gLegendEnabled=!1,t=e&&e.legendPos,a=t===r["v"]?.8:.4),o=t===r["v"]?i.availableWidth*a:i.availableHeight*a,h?g=n.manageGradientLegendSpace(o):!1!==d&&l&&!l.getState("removed")&&(g=l&&l._manageLegendPosition(o)),n._allocateSpace({bottom:g&&g.bottom||0,right:g&&g.right||0})}function i(e){var t,o,a,n,i=this,l=i.config,s=i.getFromEnv("gLegend"),c=s&&s.conf;return l.gLegendPadding=Object(r["Kb"])(i.getFromEnv("chart-attrib").legendpadding,10),a=Math.min(l.gLegendPadding,.5*e),c?(t=c.legendPosition,n=s.getLogicalSpace(e),o=t===r["r"]?{bottom:(n.height||0)+a}:{right:(n.width||0)+a}):o={bottom:0,right:0},o}var l=function(e){let t,o,a,n,i=e.getFromEnv("dataSource"),l=i.dataset,s=e.getChildren(),c=s.canvas[0],d=t=c.getChildren("vCanvas")[0],g=e.config.defaultDatasetType||"";return l?(a=e.getDSGroupdef(),a&&(Object(r["O"])(t,a,"datasetGroup_"+g,1,[l]),n=t.getChildren("datasetGroup_"+g)),n&&(d=n[0]),o=e.getDSdef(),void Object(r["T"])(d,o,"dataset",l.length,l)):void e.setChartMessage()},s=o("c439"),c=o("728b"),d={"*.legendItem.legendItem":()=>({"icon.appearing":()=>[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:1}}],"background.appearing":e=>[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:e.attr.opacity}}],"icon.disappearing":()=>[{finalAttr:{opacity:0},slot:"initial"}]})};let g=r["Mb"].POINTER,h="none",b="M",p="L",u=(e,t,o,a,r)=>{var n,i,l,s,c,d,g,h,u,m,f,v=[b];return"column"===r||"dragColumn"===r||"column3D"===r||"realtimeColumn"===r||"errorBar2D"===r?(n=.25*o,i=.5*n,l=.7*a,s=.4*a,v=v.concat([e,t+a,"l",0,-l,n,0,0,l,"z","m",n+i,0,"l",0,-a,n,0,0,a,"z","m",n+i,0,"l",0,-s,n,0,0,s,"z"])):"bar2D"===r||"bar3D"===r?(n=.3*o,i=.6*o,l=a/4,s=l/2,v=v.concat([e,t,p,e+i,t,e+i,t+l,e,t+l,"Z",b,e,t+l+s,p,e+o,t+l+s,e+o,t+l+s+l,e,t+2*l+s,"Z",b,e,t+2*(l+s),p,e+n,t+2*(l+s),e+n,t+a,e,t+a,"Z"])):"area"===r||"area3d"===r||"areaspline"===r||"dragArea"===r||"realTimeArea"===r||"splinearea"===r?(n=.3*o,i=.6*o,l=.6*a,s=.2*a,c=.8*a,v=v.concat([e,t+c,p,e,t+l,e+n,t+s,e+i,t+l,e+o,t+s,e+o,t+c,"Z"])):"pie2D"===r||"pie3d"===r||"doughnut2D"===r||"doughnut3D"===r?(n=.5*o,i=.9*n,m=1,f=1,d=e+n+m,h=t+n-m,g=e+n-f,u=t+n+f,v=v.concat([d,h,p,d,h-i+m,"A",i-m,i-m,0,0,1,d+i-m,h,"Z",b,g,u,p,g,u-i,"A",i,i,0,1,0,g+i,u,"Z"])):v=v.concat([e,t,p,e+o,t,e+o,t+a,e,t+a,"Z"]),{path:v}},m=function(e,t){let o=e.config,a=e.getLinkedParent().config,n=a.symbolWidth,i=Object(r["Kb"])(a.padding,4),l=.5*n,s=(a.initialItemX||0)+o._legendX+i,c=(a.initialItemY||0)+o._legendY-i,d=s+a.symbolPadding+l,h=c+(o._markerYGutter||0)+a.symbolPadding+l,b=Object(r["Cb"])(o.anchorSide),p=o.symbol=b&&b.split("_")||[],u="spoke"===p[0]?1:0;return("line"===o.type||o.drawLine)&&(l*=.6),{path:Object(r["Lb"])([p[1]||2,d,h,l,o.startAngle,o.spoke||u]),cursor:t.cursor||g,stroke:t.stroke,fill:t.fill,"stroke-width":t["stroke-width"]||.5}};Object(c["a"])({name:"legendItemAnimation",type:"animationRule",extension:d});class f extends s["a"]{constructor(){super(),this._stateCosmetics={},this._legendState=[]}getName(){return"legendItem"}parseLegendCosmetics(){let e,t,o,a=this,n=this.getLinkedParent(),i=n.getLegendState(),l=a.getLegendState(),s=["default"],c={};for(s=s.concat(i,l),o=0;o<s.length;o++)e=n.getStateCosmetics(s[o]),t=a.getStateCosmetics(s[o]),e&&("function"==typeof e?c=e(c,a):Object(r["W"])(c,e)),t&&("function"==typeof t?c=t(c,a):Object(r["W"])(c,t));return c}getType(){return"legendItem"}configure(e){var t,o,a=this,r=a.config;for(t in e)if(e.hasOwnProperty(t))if("object"!=typeof e[t])r[t]=e[t];else{let a=r[t]?r[t]:{};for(o in e[t])a[o]=e[t][o];r[t]=a}}itemClickFn(){let e=this,t=e.getFromEnv("chart-attrib"),o=Object(r["Kb"])(t.interactivelegend,1),a=e.getLinkedItem("owner");o&&a.legendInteractivity(e)}dispose(){this.removeEventListener("fc-click",this.click),this.removeEventListener("fc-mouseover",this.mouseover),this._dispose()}getLegendState(){return this._legendState}hasState(e){var t,o,a=this.getLegendState();for(t=0,o=a.length;t<o;t++)if(a[t]===e)return!0;return!1}setLegendState(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()}removeLegendState(e){var t,o,a=1;if(e)for(t=0,o=this._legendState.length;t<o&&a;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),a=0);else this._legendState.length=0;this.asyncDraw()}removeStateCosmetics(e){delete this._stateCosmetics[e]}setStateCosmetics(e,t){this._stateCosmetics[e]=t}getStateCosmetics(e){return this._stateCosmetics[e]}draw(){var e,t,o,a,n,i,l,s,c,d,f,v,y,C,O,x,w,k,j,L,F,I,S,A,E,_,P,T,M,B,R,K,D,G,V,W,N,H,z,X,Y,U=this.getLinkedParent(),J=U.getFromEnv("chart"),Z=J.config,$=this,q=$.getFromEnv("animationManager"),Q=$.config,ee=U.config,te=ee.legendHeight,oe=ee.symbolPadding,ae=ee.symbolWidth,re=ee.interactiveLegend,ne=ee.textPadding||2,ie=Object(r["Kb"])(ee.padding,4),le=ee.itemHoverStyle,se=U.getChildContainer("itemGroup"),ce=ee.drawCustomLegendIcon,de=$.hasState("hidden"),ge={};e=$.parseLegendCosmetics(),o=e.symbol,a=ee.initialItemX||0,n=ee.initialItemY||0,c=Q.type,L=e.symbol.stroke||"000000",F=e.symbol.fill,t=e.symbol.lineWidth||ee.lineWidth,S=Q.anchorSide,A=Q.drawLine,d=a+Q._legendX+ie,f=n+Q._legendY-ie,D=$.getGraphicalElement("legendItemBackground"),s=$.getGraphicalElement("legendItemText"),v=$.getGraphicalElement("legendItemLine"),O=$.getGraphicalElement("legendItemSymbol"),re=Object(r["Ib"])(Q.interactiveLegend,re),re||(e.cursor="default"),G=e.text,X=d+te+ne-2,Y=f+(Q._legendTestY||0),G.text=Q.name,G.x=X,G.y=Y,l=q.setAnimation({el:s||"text",attr:G,component:$,container:se,label:"icon"}),s||(l=$.addGraphicalElement("legendItemText",l)),l.data("legendItem",Q),V=!1,ce&&!1!==Q.customLegendIcon?(T=!de&&o.borderColor,M=Object(r["Ib"])(o.borderAlpha),_=!de&&o.bgColor,P=Object(r["Ib"])(o.bgAlpha,"100"),B=e.symbol.rawFillColor,F=de?e.symbol.fill:_||B,F=Object(r["P"])(F,P),R=e.symbol.rawStrokeColor,L=de?e.symbol.stroke:T||R||B,L=Object(r["P"])(L,M),w=.5*ae,x=d+oe+w,i=f+(Q._markerYGutter||0)+oe+w,E=Object(r["Cb"])(o.sides),j=E&&Object(r["Cb"])(o.sides).split("_")||[],k="spoke"===j[0]?1:0,W={path:Object(r["Lb"])([j[1]||2,x,i,w,o.startAngle||0,k]),cursor:e.symbol.cursor||g,stroke:L,fill:F,"stroke-width":Object(r["Kb"])(o.borderThickness,1)}):"line"===c||A?(i=f+(Q._markerYGutter||0)+oe+.5*ae,z={path:[b,d+oe,i,p,d+oe+ae,i]},V=!0,ge={opacity:Z.legendiconalpha||1,"stroke-width":t,stroke:L,cursor:e.cursor||g},S&&(W=m($,e.symbol))):S?W=m($,e.symbol):"line"!==c&&(L=Q.symbolStroke||L,y=u(d+oe,f+(Q._markerYGutter||0)+oe,ae,ae,c),W={path:y.path,"stroke-width":.5,stroke:L,fill:F,cursor:e.cursor||g}),z&&V?(Object.assign(z,ge),v=q.setAnimation({el:v||"path",attr:z,component:$,callback:function(){this.show()},container:se}),!$.getGraphicalElement("legendItemLine")&&(v=$.addGraphicalElement("legendItemLine",v))):v&&v.hide(),W?(W.opacity=Object(r["Kb"])(e.symbol.opacity,1),C=q.setAnimation({el:O||"path",attr:W,component:$,callback:function(){this.show()},container:se,label:"icon"}),(!O||!O.node)&&(C=$.addGraphicalElement("legendItemSymbol",C)),C.data("legendItem",Q)):O&&O.hide(),I=e.background&&e.background.legendBackgroundColor?Object(r["P"])(e.background.legendBackgroundColor,e.background.alpha):r["E"],N={x:d,y:f,width:Q._totalWidth,height:Q._legendH,r:0,fill:I,opacity:1,"stroke-width":1,stroke:h,cursor:e.symbol.cursor||g},K=q.setAnimation({el:D||"rect",attr:N,css:H,component:$,label:"background",container:se}),D||$.addGraphicalElement("legendItemBackground",K),K.data("legendItem",$).data("interactive",re).data("itemHoverStyle",le).data("itemStyle",e)}}var v=f,y=o("4229");let C=[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"plot"}],O=[{slot:"plot",startEnd:{start:0,end:.5}}],x=[{slot:"intial"}];var w={"*.legend.legend":()=>({"legendGroup.appearing":C,"legendGroup.updating":O,"legendGroup.disappearing":x,"scroller.appearing":C,"scroller.updating":O,"scroller.disappearing":x})},k=o("07fc");let j,L={left:r["w"],right:r["s"],center:r["u"]},F=Math,I=F.min,S=F.max,A=F.floor,E=F.ceil,_=",",P="none",T=r["Mb"].NORMAL,M=r["Mb"].BOLD,B=r["Mb"].noneStr,R={fontWeight:{1:M,0:T},fontStyle:{1:"italic",0:T},textDecoration:{1:"underline",0:B}},K=function(e){let t,o;return{dragstart:()=>{t=e.config.xL||e.config.xPos,o=e.config.yL||e.config.yPos},dragmove:a=>{let r,n,i=a.originalEvent.data[0],l=a.originalEvent.data[1],s=e.config,c=e.getFromEnv("chartConfig"),d=(s.borderWidth||0)+2;r=I(S(t+i,d),c.width-s.width-d),n=I(S(o+l,d),c.height-s.height-d),s.xPos=s.xL=r,s.yPos=s.yL=n,e.addJob("draw",e.dragDraw,k["b"]&&k["b"].draw)}}};Object(c["a"])({name:"legendAnimation",type:"animationRule",extension:w});class D extends s["a"]{constructor(){super();let e=this;e._stateCosmetics={},e._legendState=[],e.dragDraw=function(){e.draw()},e.drawScroll=function(){e.createItemGroup()},e.config.handlers=K(e)}createItem(e){var t,o=this;return t=new v,o.attachChild(t,"legendItem"),t.setLinkedItem("owner",e),t.addEventListener("mouseover",function(){t.setLegendState("hover",!0)}),t.addEventListener("mouseout",function(){t.removeLegendState("hover")}),t.getId()}getItem(e){var t=this,o=t.getChildren().legendItem;if(e===j)return!1;if(o)for(let a=0;a<o.length;a++)if(o[a].getId()===e)return o[a]}getSortedLegendItems(){let e,t,o=this,a=o.getChildren("legendItem")||[],r=o.config.reverselegend,n={},i=[];for(e=0,t=a.length;e<t;e++)a[e].config.index===j?n[t+e]=a[e]:n[a[e].config.index]=a[e];return Object.keys(n).sort(function(e,t){return r?t-e:e-t}).forEach(e=>{i.push(n[e])}),i}disposeItem(e){var t=this,o=t.getItem(e);o&&o.remove()}getName(){return"legend"}getType(){return"legend"}__setDefaultConfig(){super.__setDefaultConfig();let e=this.config;e.enabled=!0,e.symbolWidth=12,e.borderRadius=1,e.lastScrollPos=0,e.oriSymbolPadding=3,e.textPadding=4,e.scrollY=0,e.backgroundColor="#FFFFFF",e.initialItemX=0,e.title={text:r["b"],x:0,y:0,padding:2},e.scroll={},e.itemStyle={}}createLegendGroup(){let e,t=this,o=t.config,a=t.getFromEnv("chart"),r=a.config,n=t.getFromEnv("animationManager"),i=.5*(o.borderWidth||0)+2,l=t.getContainer("legendGroup");o.xL&&(o.xL=I(S(o.xL,i),r.width-o.width-i)),o.yL&&(o.yL=I(S(o.yL,i),r.height-o.height-i)),e=n.setAnimation({el:l||"group",attr:{name:"legendGroup",transform:["T",o.xL||o.xPos,o.yL||o.yPos]},container:a.getChildContainer("legendGroup"),component:t}),l||t.addContainer("legendGroup",e)}draw(){this.createLegendGroup(),this.drawLegendBox(),this.createItemGroup(),this.drawCaption(),this.createScrollGroup(),this.decideScroll()}decideScroll(){let e=this,t=e.config,o=t.scroll.enabled;o?this.createScrollBar():t.hasScroll&&(e.getChildren("legendScrollBar")[0].remove(),t.hasScroll=!1)}createItemGroup(){var e,t=this,o=t.getFromEnv("animationManager"),a=t.getContainer("legendGroup"),n=t.getChildContainer("itemGroup"),i=Object(r["Kb"])(t.config.padding,4),l=Math.max(t.config.height-i,0),s=_+t.config.width+_+l;return e=o.setAnimation({el:n||"group",attr:{name:"item",transform:["T",0,t.config.scrollY||0]},container:a,component:t}),n||t.addChildContainer("itemGroup",e),t.config.scroll.enabled?e.attr({"clip-rect":"0,"+.5*i+s}):e.attr({"clip-rect":null}),e}createScrollGroup(){let e=this,t=e.getFromEnv("animationManager"),o=e.getChildContainer("scrollGroup"),a=e.getContainer("legendGroup");e.config.scroll.enabled&&!e.getGraphicalElement("scrollerContainer")&&e.addGraphicalElement("scrollerContainer",t.setAnimation({el:o||"group",attr:{name:"scrollGroup"},container:a,component:e,label:"scroller"}))}createScrollBar(){var e,t,o,a,n,i,l=Math.max,s=this,c=s.config,d=s.getFromEnv("chart-attrib"),g=s.getChildren("legendScrollBar")&&s.getChildren("legendScrollBar")[0],h=c.borderWidth||0,b=Object(r["Kb"])(c.padding,4),p=c.width,u=c.height;e={conf:{isHorizontal:!1},handler:{scroll:function(e){c.lastScrollPos=e,c.scrollY=(o-c.totalHeight)*e,s.addJob("scrollDraw",s.drawScroll,k["b"]&&k["b"].draw)},mousedown:function(e){e.preventDefault(),e.stopPropagation()}}},d.legendscrollbgcolor&&(e.conf.color=Object(r["P"])(d.legendscrollbgcolor)),g||(g=s.attachChild(new y["b"],"legendScrollBar"),this.config.hasScroll=!0),g.configure(e.conf),g.attachEventHandlers(e.handler),t=g.config,o=l(u-b,0),a=p-10+.5*b-h,n=.5*h,i=l(u-h,0),t.scrollRatio=(o+b)/c.totalHeight,t.startPercent=0,t.scrollPosition=c.lastScrollPos,t.parentLayer=s.getChildContainer("scrollGroup"),g.setDimension({x:a,y:n,height:i})}drawCaption(){var e,t,o,a,n=this,i=n.getChildContainer("itemGroup"),l=n.getGraphicalElement("caption"),s=this.getFromEnv("animationManager"),c=this.config,d=Object(r["Kb"])(c.padding,4),g=c.scroll.enabled,h=c.width;if(c.title&&c.title.text!==r["b"]&&c.validLegendItem){switch(c.title.align){case r["w"]:o=d;break;case r["s"]:o=h-d-(g?10:0);break;default:o=.5*h}t=c.title.style,e={text:c.title.text,title:c.title.originalText||r["b"],x:o,y:d,fill:c.title.style.color,direction:c.textDirection,"line-height":t.lineHeight,"vertical-align":r["x"],"text-anchor":c.title.align,opacity:1},a={"font-weight":t.fontWeight,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-size":t.fontSize},l&&l.show(),l?s.setAnimation({el:l,attr:e,component:n}):(l=s.setAnimation({el:"text",attr:e,component:n,container:i}),l=this.addGraphicalElement("caption",l),l.css(a)),n.getFromEnv("toolTipController").enableToolTip(l,c.title.originalText)}else l&&s.setAnimation({el:l,component:n,doNotRemove:!0,callback:function(){l.hide()}})}drawLegendBox(){var e,t=this,o=this.getFromEnv("animationManager"),a=t.config,r=t.getContainer("legendGroup"),n=a.width,i=t.getGraphicalElement("box"),l=a.height,s=a.borderRadius,c=a.backgroundColor,d=a.borderColor,g=a.borderAlpha,h=a.backgroundAlpha,b=a.borderWidth||0;return e=o.setAnimation({el:i||"rect",attr:{x:0,y:0,width:n,height:l,r:s,stroke:d,"stroke-width":b,fill:c||P,"stroke-opacity":g/100,"fill-opacity":h/100,cursor:a.legendAllowDrag?"move":"default"},container:r,component:t,label:"legendGroup"}),i||(t.addGraphicalElement("box",e),e.shadow(a.shadow)),e}getPosition(){var e,t,o,a,n,i,l=this,s=l.getFromEnv("chart"),c=s.config,d=l.config,g=c.height-c.canvasBottom,h=c.canvasLeft,b=c.canvasWidth,p=d.chartMarginLeft||0,u=d.chartMarginRight||0,m=d.chartMarginBottom||0,f=c.actionBarHeight||0,v=d.actualCanvasMarginLeft||0,y=c.actualCanvasMarginBottom||0,C=c.actualCanvasMarginRight||0,O=d.alignLegendWithCanvas,x=c.height,w=c.canvasTop,k=d.width||0,j=d.height||0,L=c.borderWidth,F=c.oriCanvasLeft,I=c.oriTopSpace,S=c.oriBottomSpace,A=0,E=0,_=d.borderWidth||0,P=d.legendPos;return P===r["v"]&&(d.align=r["v"],d.verticalAlign=r["u"],i=d.layout="vertical"),i?(e=c.width-u-C-k-L,A=Object(r["Kb"])(I,w),E=Object(r["Kb"])(S,g),t=A+.5*(x-E-A-j)+(d.y||0)):(a=c.width-(p+v+(u+C)),n=O?b-k:a-k,o=O?Object(r["Kb"])(F,h):p+v,e=o+n/2,t=x-j-y-m-f),Object(r["S"])(e,t,k,j,_)}setTranslation(e,t){var o=this,a=o.config;a._translateX=e,a._translateY=t,a.translate="t"+e+","+t}allocatePosition(){var e,t=this,o=t.config;e=o.translate?Object(r["S"])(o._translateX,o._translateY,o.width,o.height,o.borderWidth):t.getPosition(),o.xPos=e.x,o.yPos=e.y,o.width=e.width,o.height=e.height}_manageLegendPosition(e){var t,o=this,a=o.config,n=a.legendPos;return a.padding=4,a.textPadding=4,t=n===r["v"]?o._placeLegendBlockRight(e):o._placeLegendBlockBottom(e),t}setDimension(e){var t=Math.max;let o,a,n,i,l,s,c,d,g,h,b,p,u,m,f,v,y,C,O,x,w,k,j,L,F=this,_=this.config,P=F.getSortedLegendItems(),T=P.length,M=e.width,B=e.height,R=2*B,K=0,D=0,G=0,V=0,W=0,N=0,H=0,z=0,X=[],Y=!1,U=_.padding,J=_.textPadding,Z=F.getFromEnv("smartLabel"),$=F.getStateCosmetics("default"),q=parseInt($.text["font-size"],10)||10,Q=0,ee=0,te=_.title,oe=te.padding,ae=_.minimiseWrappingInLegend,re=_.legendPadding,ne=_.legendScale,ie=_.alignLegendWithCanvas,le=_.numColumns,se=_.oriSymbolPadding,ce=M;for(m={width:2*U,height:2*U},u=q+1,0>=u&&(u=1),M=t(M-2*U,0),u*=ne,se*=ne,u=I(u,M),0>=u&&(se=u=0),_.symbolWidth=u,_.textPadding=4,_.legendHeight=p=u+2*se,_.rowHeight=s=S(parseInt($.text["line-height"],10)||12,p),l=J+se+U,Z.setStyle(Object(r["W"])({},$.text)),f=Z.getOriSize(r["C"]).height,c=re+_.borderWidth/2+1,c=I(c,B-f-8),re=.05*s,_.initialItemY=0,_.initialItemX=0,v=0;v<T;v+=1)i=P[v],o=i.config||(i.config={}),a=o,n=o.name=Object(r["Hb"])(a.label),n===r["b"]||0===a.enabled||!1===a.enabled||i.getState("removed")?o.enabled=0:(o.enabled=1,G+=1,w=!0,k=Z.getOriSize(n),K=S(K,k.width),N=S(N,I(k.height,R)),D+=k.width);if(_.validLegendItem=w,V=D/G,L=p+re+J+se+2*U,D+=L*G,_.x=!ie&&D>ce?0:_.x,w){for(V+=L,K+=L,0<le&&G<le&&(le=G),D<=M&&(0>=le||le===G)?(le=G,W=V=D/G,Y=!0,N>s&&(z=(N-s)/2,s=N)):0<le&&(W=M/le)>V?W>K&&(W=K):M>K&&(ae||1.5*V>K)?(le=A(M/K),G<le&&(le=G),W=K):M>=2*V?(le=A(M/V),G<le&&(le=G),W=A(M/le),W>K&&(W=K)):(le=1,W=M),_.itemWidth=W,d=E(W-L),0>d&&(se=d=J=0),_.symbolPadding=se,_.textPadding=J,_.width=t(W*le-re,0),te.oriText!==r["b"]&&(Z.setStyle(te.style),k=Z.getSmartText(te.oriText,M,R),te.text=k.text,k.tooltext&&(te.originalText=k.tooltext),b=k.width+2*U,_.width<b&&(_.initialItemX=(b-_.width)/2,_.width=b),_.initialItemY=H=k.height+oe),Z.setStyle(Object(r["W"])({},$.text)),v=0;v<T;v+=1)if(i=P[v],o=i.config,0!==o.enabled){if(0===d&&(X[ee]=!0,o.name=r["b"],y=1,O=parseInt(ee/le,10),C=ee%le,o._legendX=C*W,o._legendY=O*s+2*U,o._legendH=y*s,o._totalWidth=u+se),Y)k=Z.getOriSize(o.name),k.height<s&&(o._legendTestY=(s-k.height)/2),o._markerYGutter=z,o._legendX=Q,o._legendY=2*U,o._legendH=s,o._totalWidth=u+l+k.width,Q+=k.width+L;else{for(k=Z.getSmartText(o.name,d,R),o.name=k.text,k.tooltext&&(o.originalText=k.tooltext);!0===X[ee];)ee+=1;for(g=k.height/s,h=ee,y=0;y<g;y+=1,h+=le)X[h]=!0;k.height<s&&(o._legendTestY=(s-k.height)/2),O=parseInt(ee/le,10),C=ee%le,o._legendX=C*W,o._legendY=O*s+2*U,o._legendH=y*s,o._totalWidth=u+l+k.width}ee++}x=Y?1:E(X.length/le),m.height+=x*s+H,_.height=_.totalHeight=m.height,_.rowHeight=s,_.legendNumColumns=le,_.height-2*se>B?(_.height=B,j=_.scroll||(_.scroll={}),j.enabled=!0,j.flatScrollBars=_.flatScrollBars,j.scrollBar3DLighting=_.scrollBar3DLighting,_.width=_.width+12>M?_.width:_.width+12):_.scroll.enabled=!1,c+=_.height,_.isActive=!0,_.enabled=!0}else _.enabled=!1,_.width=0,c=0;return{width:M,height:c}}_placeLegendBlockBottom(e){var t,o,a,n,i,l=this,s=l.getFromEnv("chart"),c=s.config,d=s.getFromEnv("chartWidth"),g=s.getFromEnv("chartHeight"),h=c.canvasLeft,b=c.width-(c.canvasRight||0),p=s.getFromEnv("smartLabel"),u=l.config,m=u.chartMarginLeft,f=u.chartMarginRight,v=u.chartMarginTop,y=u.alignLegendWithCanvas,C=l.getSortedLegendItems(),O=C.length,x=u.legendPadding,w=c.canvasMarginRight,k=c.canvasMarginLeft,j=s.getChildren("yAxis"),L=j&&j[0].config.isVertical?j:s.getChildren("xAxis"),F=L&&L[0],I=L&&L[1],S=F&&F.config||{},A=I&&I.config||{},E=S.nameMaxW,_=A.nameMaxW,P=S.name&&S.name.style||{},T=A.name&&A.name.style||{},M=S.axisName||r["b"],B=A.axisName||r["b"],R=c.canvasWidth-c.canvasMarginLeft-c.canvasMarginRight;return u.paddingBottom=c.height-c.canvasBottom,p.useEllipsesOnOverflow(c.useEllipsesWhenOverflow),p.setStyle(P),n=p.getOriSize(M),p.setStyle(T),i=p.getOriSize(B),R<x&&(u.padding=x=R=0),(n||i)&&(o=Object(r["Kb"])(n.height,0)>Object(r["Kb"])(i.height,0)?(a=E)&&n.width:(a=_)&&i.width),R=y?R:d-(o+v>g-e?2*a+f+m+w+k:f+m+k+w),u.showLegend&&0!==O?(u.x=(h-m-b+f)/2,t=l.setDimension({width:R,height:e}).height):(t=0,u.height=0,u.width=0),{bottom:t,right:0}}_placeLegendBlockRight(e){var t,o,a,n,i,l,s,c,d,g,h=this,b=h.config,p=h.getFromEnv("chart"),u=p.config,m=p.getFromEnv("smartLabel"),f=p.getChildren("canvas")[0].config.canvasBorderThickness||0,v=b.textPadding,y=b.title.padding,C=b.oriSymbolPadding,O=b.legendPadding,x=b.legendScale,w=h.getStateCosmetics("default"),k=parseInt(w.text["font-size"],10),j=u.canvasHeight,L=2*j,F=0,A=b.padding,E=2*A,_={width:E,height:E},P={},T=!1,M=h.getSortedLegendItems(),B=M.length,R=0;if(b.initialItemY=0,b.initialItemX=0,e-=E+O,e<O&&(b.padding=O=e=0),n=k+1,0>=n&&(n=1),n*=x,C*=x,n=I(n,e),0>=n&&(C=n=0),b.symbolPadding=C,b.symbolWidth=n,b.legendHeight=i=n+2*C,b.rowHeight=S(parseInt(w.text["line-height"],10)||12,i),t=O+b.borderWidth/2+f,a=e-i-O-v,0>a&&(a=0),m.useEllipsesOnOverflow(u.useEllipsesWhenOverflow),m.setStyle(Object(r["W"])({},w.text)),b.showLegend&&0!==B){for(R=0;R<B;R+=1)g=M[R],l=g.config||(g.config={}),d=l,s=l.name=Object(r["Hb"])(d.label),l._legendX=0,l._legendY=_.height,0!==d.enabled&&!1!==d.enabled&&s!==r["b"]?(l.enabled=1,T=!0,0===a?(_.height+=l._legendH=i,l.name=r["b"],l._totalWidth=n+C):(o=m.getSmartText(s,a,L),l.name=o.text,o.tooltext&&(l.originalText=o.tooltext),o.height<i&&(l._legendTestY=(i-o.height)/2),l._totalWidth=n+C+v+o.width+O,_.height+=l._legendH=S(o.height,i),F=S(o.width,F))):l.enabled=0;b.validLegendItem=T,T?(b.itemWidth=F+i+O+v,b.width=b.itemWidth+E,b.title.oriText!==r["b"]&&(m.setStyle(b.title.style),o=m.getSmartText(b.title.oriText,e,L),b.title.text=o.text,o.tooltext&&(b.title.originalText=o.tooltext),c=o.width+E,b.width<c&&(b.initialItemX=(c-b.width)/2,b.width=c),b.initialItemY=o.height+y,_.height+=b.initialItemY),b.height=b.totalHeight=_.height,t=I(b.width+t,e),P.right=t+O,b.isActive=!0,b.enabled=!0):(b.enabled=!1,b.width=0,P.right=0)}else P.right=0,b.height=0,b.width=0;return P}postSpaceManager(){var e=this,t=e.config,o=t.legendPos,a=e.getFromEnv("chart"),n=a.config.canvasHeight;o===r["v"]&&(t.height>n?(t.height=n,t.scroll.enabled=!0,t.scroll.flatScrollBars=t.flatScrollBars,t.scroll.scrollBar3DLighting=t.scrollBar3DLighting,t.width+=(t.scroll.scrollBarWidth=10)+(t.scroll.scrollBarPadding=2)):t.scroll.enabled=!1)}configureAttributes(e={}){super.configureAttributes(e);var t,o,a,n,i,l=this,s=l.config,c=l.getFromEnv("chart"),d=c.config,g=l.getFromEnv("style"),h=c.getFromEnv("chart-attrib"),b=c.config.is3D,p=l.getFromEnv("color-manager"),u=b?r["L"].chart3D:r["L"].chart2D,m=s.interactiveLegend=!1!==c.hasInteractiveLegend&&!!Object(r["Kb"])(h.interactivelegend,1),f=Object(r["Kb"])(h.useroundedges,0),v=g.outCancolor,y=e.style&&e.style.text,C=Object(r["Ib"])(h.legenditemfont,y&&y["font-family"],g.outCanfontFamily),O=Object(r["Kb"])(h.legendiconscale,1),x=Object(r["Jb"])(h.legenditemfontsize,y&&y["font-size"],g.fontSize)+"px",w=Object(r["Ib"])(h.legenditemfontcolor,y&&y.color,v).replace(/^#?([a-f0-9]+)/gi,"#$1"),k=Object(r["gb"])(Object(r["Ib"])(h.legenditemhoverfontcolor,w));s.isActive=!1,s.chartMarginTop=d.origMarginTop,s.chartMarginRight=d.origMarginRight,s.chartMarginBottom=d.origMarginBottom,s.chartMarginLeft=d.origMarginLeft,s.reverselegend=Object(r["Kb"])(h.reverselegend,0),s.showLegend=Object(r["Kb"])(h.showlegend,!c.dontShowLegendByDefault,1),t=Object(r["Sb"])({fontSize:x}),s.legendPos=Object(r["Ib"])(h.legendposition,c.legendposition,e.legendPosition,r["r"]).toLowerCase(),s.numColumns=Object(r["Kb"])(h.legendnumcolumns,0),s.xL=s.yL=0,(0>=O||5<O)&&(O=1),s.drawCustomLegendIcon=Object(r["Kb"])(h.drawcustomlegendicon,e.drawcustomlegendicon,0),s.legendScale=O,s.legendPadding=Object(r["Kb"])(h.legendpadding,7),s.alignLegendWithCanvas=Object(r["Kb"])(e.alignlegendwithcanvas,d.alignLegendWithCanvas),s.title.style={fontFamily:Object(r["Ib"])(h.legendcaptionfont,C),fontSize:Object(r["Jb"])(h.legendcaptionfontsize,g.fontSize)+"px",color:Object(r["Ib"])(h.legendcaptionfontcolor,v).replace(/^#?([a-f0-9]+)/gi,"#$1"),fontWeight:R.fontWeight[Object(r["Kb"])(h.legendcaptionfontbold,1)]||r["b"]},i=h.legendcaptionalignment?h.legendcaptionalignment.toLowerCase():L.center,s.title.align=L[i]||L.center,s.title.style["text-anchor"]=s.title.align,s.padding=4,o=Object(r["Ib"])(h.legendbordercolor,p.getColor(u.legendBorderColor)),a=s.borderAlpha=Object(r["Kb"])(h.legendborderalpha,100),s.borderColor=Object(r["P"])(o,a),s.borderWidth=Object(r["Kb"])(h.legendborderthickness,e.legendborderthickness,!f||h.legendbordercolor?1:0),s.borderRadius=Object(r["Kb"])(f,0),s.backgroundAlpha=n=Object(r["Kb"])(h.legendbgalpha,e.legendbgalpha,100),s.backgroundColor=Object(r["P"])(Object(r["Ib"])(h.legendbgcolor,p.getColor(u.legendBgColor)),n),s.symbol3DLighting=!!Object(r["Kb"])(h.use3dlighting,h.useplotgradientcolor,1),s.shadow=!!Object(r["Kb"])(h.legendshadow,1),s.shadow&&(s.shadow={enabled:s.shadow,opacity:S(a,n)/100}),s.prevReversed=!!Object(r["Kb"])(s.reversed,0),s.reversed=!!Object(r["Kb"])(h.reverselegend,0),s.lineWidth=Object(r["Kb"])(h.linethickness,2),s.borderRadius=Object(r["Kb"])(h.legendborderradius,f?3:0),s.legendAllowDrag=!!Object(r["Kb"])(h.legendallowdrag,0),s.title.oriText=Object(r["Hb"])(Object(r["hb"])(h.legendcaption,r["b"])),s.legendScrollBgColor=Object(r["gb"])(Object(r["Ib"])(h.legendscrollbgcolor,h.scrollcolor,p.getColor("altHGridColor"))),s.legendScrollBarColor=Object(r["Ib"])(h.legendscrollbarcolor,o),s.legendScrollBtnColor=Object(r["Ib"])(h.legendscrollbtncolor,o),s.minimiseWrappingInLegend=Object(r["Kb"])(h.minimisewrappinginlegend,0),s.flatScrollBars=Object(r["Kb"])(h.flatscrollbars,0),s.scrollBar3DLighting=Object(r["Kb"])(h.scrollbar3dlighting,1),s.orderReversed=!1,l.setStateCosmetics("hidden",{symbol:{fill:Object(r["P"])(Object(r["Ib"])(h.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1")),stroke:Object(r["P"])(Object(r["Ib"])(h.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))},text:{fill:Object(r["P"])(Object(r["Ib"])(h.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))}}),l.setStateCosmetics("default",{text:{fill:Object(r["P"])(w),"font-family":C,cursor:m?r["Mb"].POINTER:"default","font-size":x,"line-height":t,"vertical-align":r["x"],"text-anchor":r["w"],direction:"rtl"===d.textDirection?"rtl":"initial","font-weight":R.fontWeight[Object(r["Kb"])(h.legenditemfontbold,0)]||r["b"]},symbol:{bgColor:Object(r["Ib"])(h.legendiconbgcolor),cursor:m?r["Mb"].POINTER:"default",borderColor:Object(r["Ib"])(h.legendiconbordercolor),bgAlpha:Object(r["Ib"])(h.legendiconbgalpha,h.legendiconalpha,100),borderAlpha:Object(r["Ib"])(h.legendiconborderalpha,h.legendiconalpha,100),borderThickness:Object(r["Kb"])(h.legendiconborderthickness),startAngle:Object(r["Kb"])(h.legendiconstartangle,45),sides:Object(r["Kb"])(h.legendiconsides,e.legendiconsides,4)}}),l.setStateCosmetics("hover",function(e,t){return t.hasState("hidden")||(!e.text&&(e.text={}),e.text.fill=Object(r["P"])(k.replace(/^#?([a-f0-9]+)/gi,"#$1")),e.text.cursor="inherit"),e}),s.legendAllowDrag&&!s._dragEvtListenerBinded?(l.addEventListener("fc-dragstart",s.handlers.dragstart),l.addEventListener("fc-dragmove",s.handlers.dragmove),s._dragEvtListenerBinded=!0):(l.removeEventListener("fc-dragstart",s.handlers.dragstart),l.removeEventListener("fc-dragmove",s.handlers.dragmove),s._dragEvtListenerBinded=!1)}getLegendState(){return this._legendState}hasState(e){var t,o,a=this.getLegendState();for(t=0,o=a.length;t<o;t++)if(a[t]===e)return!0;return!1}setLegendState(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()}removeLegendState(e){var t,o,a=1;if(e)for(t=0,o=this._legendState.length;t<o&&a;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),a=0);else this._legendState.length=0;this.asyncDraw()}setStateCosmetics(e,t){this._stateCosmetics[e]=t}removeStateCosmetics(e){delete this._stateCosmetics[e]}getStateCosmetics(e){return this._stateCosmetics[e]}hide(){var e=this,t=e.getFromEnv("chart"),o=t.getChildContainer("legendGroup");o&&o.hide()}}var G=D,V=function(e){let t;Object(r["O"])(e,G,"legend"),t=e.getChildren("legend")[0],t.configure(),e.addToEnv("legend",t),e.config.showLegend||t.remove()};class W extends a["a"]{constructor(){super(),this.registerFactory("dataset",l,["vCanvas"]),this.registerFactory("legend",V)}static getName(){return"MSCartesian"}getName(){return"MSCartesian"}getType(){return"chartAPI"}_createLayers(){super._createLayers();let e=this.getFromEnv("animationManager");this.getChildContainer("legendGroup")||this.addChildContainer("legendGroup",e.setAnimation({el:"group",attr:{name:"legend"},component:this,container:this.getContainer("parentgroup"),label:"group"}))}_manageLegendSpace(){n.call(this)}manageGradientLegendSpace(e){return i.call(this,e)}}var N=W,H=o("a734"),z=o("509c"),X=o("5630"),Y=o("485d"),U=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],J={"initial.dataset.entities":function(){return{"path.appearing":()=>(U[0].slot="plot",U),"path.updating":e=>[{finalAttr:function(){return e.finalAttr}}],"labelConnectors.appearing":()=>(U[0].slot="final",U),"labelConnectors.updating":null,"entityLabel.appearing":()=>[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}],"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":()=>(U[0].slot="final",U),"markerItem.updating":e=>[{finalAttr:function(){return e.finalAttr}}]}},"initial.group.mapGroup":function(){return{"group.appearing":e=>[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}],"group.updating":e=>[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}],"*":null}}},Z=function(e){var t,o,a,r,n=window,i=n.parseFloat,l=e._createNode,s=e._setFillAndStroke,c=e.el.constructor,d={Q:"L",Z:"X",q:"l",z:"x",",":" "},g=/,?([achlmqrstvxz]),?/gi,h=function(){return this.join(",").replace(g,o)};e.svg?(o="$1",a=function(){var t=this,a=e.is(arguments[0],"array")?arguments[0]:Array.prototype.slice.call(arguments);a?"string"==typeof a?a=a.replace(g,o):a.toString=h:a="M0,0",t.node.setAttribute("d",a.toString())},e._engine.litepath=function(t,o,a,r,n){var i,d=l("path");return(r||o).canvas.appendChild(d),i=new c(d,o,r),i.type="litepath",i.id=d.raphaelid=e._oid++,d.raphael=!0,s(i,n||{fill:"none",stroke:"#000"}),i},e._getPath.litepath=function(t){return e.parsePathString(t.node.getAttribute("d"))}):e.vml&&(o=function(e,t){return d[t]||t},r=function(){var e=this;return e._transform.apply(e,arguments),e._.bcoord&&(e.node.coordsize=e._.bcoord),e},a=function(e){var t=this;return e?"string"==typeof e?e=e.replace(g,o):e.toString=h:e="M0,0",t.node.path=e,t},e._engine.litepath=function(t,o,a,n,s){var d,g=l("shape"),h=g.style,b=new c(g,o,n);return h.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;",a=i(a),isNaN(a)?g.coordsize="21600 21600":(b._.bzoom=a,h.width="1px",h.height="1px",g.coordsize=b._.bcoord=a+" "+a),g.coordorigin=o.coordorigin,b.type="litepath",b.id=g.raphaelid=e._oid++,g.raphael=!0,b._transform=b.transform,b.transform=r,e._setFillAndStroke(b,s||{fill:"none",stroke:"#000"}),(n||o).canvas.appendChild(g),d=l("skew"),d.on=!0,g.appendChild(d),b.skew=d,b},e._getPath.litepath=function(t){return e.parsePathString(t.node.path||"")}),e.fn.litepath=function(o,r,n){var i,l,s,d=this;return"object"==typeof o&&o.constructor!==c&&(i=o,o=o.litepath,l=o.zoom,n=o.group),r&&r.constructor===c?(n=r,l=t):l=r,o&&o.constructor===c&&(n=o,o=""),s=e._engine.litepath(o,this,l,n,i),s.ca.litepath=a,o&&s.attr("litepath",e.is(o,"array")?[o]:o),d.__set__&&this.__set__.push(s),d._elementsById[s.id]=s}};let $,q=Object(c["b"])("redraphael","plugin"),Q=window.navigator.userAgent,ee=/msie/i.test(Q)&&!window.opera,te=",",oe="",ae="top",re="bottom",ne="right",ie="left",le="middle",se="center",ce="crisp",de=window.Math,ge=de.min,he=de.max,be=/stroke/gi,pe=/AppleWebKit/.test(Q),ue=de.ceil,me=function(e,t){let o=t?Object(r["W"])(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=r["Vb"],o},fe=function(e,t){let o,a={};if(t=t||1,!e||"object"!=typeof e)return a;for(o in e)be.test(o)||("stroke-width"===o?(a[o]=+e[o]/t,pe&&(a[o]=a[o]&&ue(a[o])||0)):a[o]=e[o]);return a},ve={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*ge(t,e-t)}},ye={top:function(){return arguments[1]},middle:function(e,t){return 2*ge(t,e-t)},bottom:function(e,t){return e-t}},Ce=function(e){let t,o=e&&e.length||0,a={};for(;o--;)t=e[o],t.id!==$&&(a[t.id.toLowerCase()]=t);return a};Object(c["a"])({name:"mapsAnimation",type:"animationRule",extension:J}),Z(q);class Oe extends s["a"]{constructor(){super(),this.components={}}getName(){return"entities"}getType(){return"dataset"}configureAttributes(e){if(!e)return;this.JSONData={data:e};let t,o,a,n,i,l,s,c,d=this,g=d.getFromEnv("chart"),h=g.jsonData,b=d.config,p=h.map||h.chart,u=[],m=d.getFromEnv("colorManager"),f=h.entitydef||[];for(i in!b.attachEvent&&m&&(d.addExtEventListener("legendUpdate",function(){if(c=arguments[1],"legend"===c.component)d.legendInteractivity(c.legendItem,c.colorObj);else for(u=c.maxMinArray,l=u.length,s=0;s<l;s++)d.updateEntityColors(u[s].min,u[s].max)},m),b.attachEvent=!0),t=h.data&&h.data[0]&&h.data[0].data?d.JSONData=h.data[0].data||[]:d.JSONData=h.data||[],b.useSNameAsId=Object(r["Kb"])(p.usesnameasid,0),this._redefineEntities(f),o=d.components.data,b.showTooltip=Object(r["Kb"])(p.showtooltip,1),b.showHoverEffect=Object(r["Kb"])(p.showhovereffect,0),t=Ce(t),d.calculateDataLimits(),h.colorrange||d.detachChild(d.getChildren("colorRange")&&d.getChildren("colorRange")[0].getId()),o)a=t[i],n=o[i],a?this._configureEntity(i,n,Object(r["xb"])(Oe._sanitizeEntityOptions(Object(r["W"])({},a)),n.config)):this._configureEntity(i,n,n.config)}updateEntityColors(e,t){let o,a,r,n,i,l,s=this,c=s.components.data,d=s.getFromEnv("chart"),g={"fill-opacity":0};for(n in c)o=c[n],a=o.config,r=a.cleanValue,i=a.alphaArr||[],l={"fill-opacity":i[0]/100||1},r<e||r>t?(Oe.setCustomAttrs(o,g,d),o.hidden=!0):(o.hidden=!1,Oe.setCustomAttrs(o,l,d))}legendInteractivity(e,t){let o,a,r,n,i,l,s=this,c=s.getFromEnv("chart"),d=s.components.data,g=e.config,h=e.hasState("hidden"),b=s.getFromEnv("colorManager"),p={},u={"fill-opacity":0};for(o in c.getFromEnv("animationManager").setAnimationState("legendInteraction"),d)d.hasOwnProperty(o)&&(a=d[o],g=a.config,r=g.cleanValue,l=b.getColorObj(r),n=g.visibleEntityAttr,p["fill-opacity"]=n["fill-opacity"],i=h?p:u,t.code===(!l.outOfRange&&l.code)&&(a.hidden=!h,Oe.setCustomAttrs(a,i,c),h?e&&e.removeLegendState("hidden"):e.setLegendState("hidden")))}static setCustomAttrs(e,t){let o,a;e&&(o=e.graphics,a=o.outlines,a.attr(t))}calculateDataLimits(){let e,t,o,a,r=this,n=r.getFromEnv("chart"),i=r.config,l=n.jsonData,s=l.data||[],c=this.getFromEnv("number-formatter"),d=1/0,g=-1/0;for(a=0,o=s.length;a<o;a++)t=s[a].value,e=c.getCleanValue(t),d=ge(d,e),g=he(g,e);i.max=g,i.min=d}_configureEntity(e,t,o){let a,n,i,l,s,c,d,g,h,b,p,u,m,f,v,y,C,O,x,w,k,j,L=this,F=L.getFromEnv("chart"),I=L.config,S=this.getFromEnv("number-formatter"),A=F.config,E=A.entityOpts,_=t.config,P=t.labelConfig,T=o.value,M=_.cleanValue=S.getCleanValue(T),B=_.formattedValue=M===$?$:S.dataLabels(M),R=Object(r["Kb"])(o.showtooltip,E.showTooltip),K=this._getDefaultTooltip(t,o,L),D={formattedValue:B,sName:o.shortLabel,lName:o.label},G=E.dataLabels.style,V=_.toolText=R?Object(r["Hb"])(Object(r["Ib"])(Object(r["Gb"])(Object(r["Ib"])(o.tooltext,E.tooltext,K),[1,2,7,38,39],D,o))):oe,W=_.borderColor=Object(r["Ib"])(o.bordercolor,E.borderColor),N=_.borderAlpha=Object(r["Ib"])(o.borderalpha,E.borderAlpha),H=_.borderThickness=Object(r["Kb"])(o.borderthickness,E.borderThickness),z=E.hoverOnNull,X=_.useHoverColor=Object(r["Kb"])(o.showhovereffect,o.usehovercolor,z?E.showHoverEffect:isNaN(T)?0:E.showHoverEffect),Y=_.labelAlignment,U=L.getFromEnv("colorManager");if(t.hidden=!1,_.showLabel=Object(r["Kb"])(o.showlabel,E.showLabels),_.labelPadding=Object(r["Kb"])(o.labelpadding,E.labelPadding),_.fontFamily=Object(r["Ib"])(o.font,G.fontFamily),_.fontSize=Object(r["Kb"])(parseInt(o.fontsize,10),parseInt(G.fontSize,10)),_.fontBold=Object(r["Kb"])(o.fontbold,0),_.fontColor=Object(r["Ib"])(o.fontcolor,G.color),_.connectorColor=Object(r["Ib"])(o.labelconnectorcolor,E.connectorColor),_.connectorAlpha=Object(r["Ib"])(o.labelconnectoralpha,E.connectorAlpha),_.hoverBorderThickness=Object(r["Kb"])(o.borderhoverthickness,o.hoverborderthickness,E.hoverBorderThickness),_.hoverBorderColor=Object(r["Ib"])(o.borderhovercolor,o.hoverbordercolor,E.hoverBorderColor,_.borderColor),_.hoverBorderAlpha=Object(r["Ib"])(o.borderhoveralpha,o.hoverborderalpha,E.hoverBorderAlpha,_.borderAlpha),_.connectorThickness=Object(r["Kb"])(o.labelconnectorthickness,E.connectorThickness),_.origConnectorThickness=_.connectorThickness,_.borderThickness=H,_.link=o.link,_.isVisible=!0,_.id=e,_.originalId=o.origId,null!==M&&(a=U&&U.getColor(M),a&&!a.outOfRange&&(y=a.code,a.oriAlpha!==$&&(C=a.oriAlpha+""))),Object(r["Ib"])(o.color,o.alpha,o.angle,o.ratio)===$?(f=me({color:Object(r["Ib"])(y,E.fillColor),alpha:Object(r["Ib"])(C,E.fillAlpha),angle:Object(r["Ib"])(E.fillAngle),ratio:Object(r["Ib"])(E.fillRatio)}),m=me({color:Object(r["Ib"])(E.nullEntityColor),alpha:Object(r["Ib"])(E.nullEntityAlpha),angle:Object(r["Ib"])(E.nullEntityAngle),ratio:Object(r["Ib"])(E.nullEntityRatio)}),h=null===M?m:f,s=h.FCcolor.color,c=h.FCcolor.alpha,d=h.FCcolor.angle,g=h.FCcolor.ratio):(s=Object(r["Ib"])(o.color,y,E.fillColor),c=Object(r["Ib"])(o.alpha,C,E.fillAlpha),d=Object(r["Ib"])(o.angle,E.fillAngle),g=Object(r["Ib"])(o.ratio,E.fillRatio),h=me({color:s,alpha:c,angle:d,ratio:g})),V===oe&&(I.showTooltip=0),_.visibleEntityAttr={stroke:Object(r["P"])(W,N),fill:(_.fillColor=h).toString(),"fill-opacity":c/100},j=c.split(te),_.alphaArr=j,X&&(Object(r["Ib"])(o.fillhovercolor,o.fillhoveralpha,o.fillhoverangle,o.fillhoverratio,o.hoverfillcolor,o.hoverfillalpha,o.hoverfillratio,o.hoverfillangle)===$?(!E.hoverColorObject&&(E.hoverColorObject=me({color:E.hoverFillColor,alpha:E.hoverFillAlpha,angle:E.hoverFillAngle,ratio:E.hoverFillRatio})),v=E.hoverColorObject):(s=Object(r["Ib"])(o.fillhovercolor,o.hoverfillcolor,E.hoverFillColor),c=Object(r["Ib"])(o.fillhoveralpha,o.hoverfillalpha,E.hoverFillAlpha),d=Object(r["Ib"])(o.fillhoverangle,o.hoverfillangle,E.hoverFillAngle),g=Object(r["Ib"])(o.fillhoverratio,o.hoverfillratio,E.hoverFillRatio),v=me({color:s,alpha:c,angle:d,ratio:g})),_.hoverColor=v),P||(P=t.labelConfig={}),b=_.fontColor,p=_.fontFamily,u=_.fontBold,V=_.toolText,n=_.link,Y?(i=Y[0],l=Y[1]):(i=se,l=le),P.align=i,P.vAlign=l,P.bgColor=oe,P.borderColor=oe,P.fontColor=b,P.fontFamily=p,P.fontBold=u,P.toolText=V,P.link=n,"object"==typeof _.options)for(O=_.entityLabels=_.entityLabels||[],w=_.labels||[],k=w.length;k--;)O[k]||(O[k]={config:{}}),P=O[k].config,Y=w[k].labelAlignment,Y?(i=Y[0],l=Y[1]):(i=se,l=le),P.align=i,P.vAlign=l,P.displayValue=L.getDisplayValue(t,w[k],_.options.isDataEnabled,!k,o),P.bgColor=oe,P.borderColor=oe,P.toolText=V,P.align=i,P.vAlign=l,P.bgColor=oe,P.borderColor=oe,P.fontColor=b,P.fontFamily=p,P.fontBold=u,P.toolText=V;else x={shortText:_.shortLabel,text:_.label},P.displayValue=L.getDisplayValue(t,x,!0,!0,o)}getDisplayValue(e,t,o,a,n){let i,l=this.getFromEnv("chart"),s=l.config.entityOpts,c=e.config,d=c.cleanValue,g=c.formattedValue,h=s.labelSepChar;return o?a&&"undefined"!=typeof n.displayvalue?i=n.displayvalue:(i=Object(r["Ib"])(s.includeNameInLabels?s.useShortName?t.shortText:t.text:""),s.includeValueInLabels&&null!==d&&(i=i===$?g:i+h+g)):i=c.label,i}static _sanitizeEntityOptions(e){return delete e.outlines,delete e.label,delete e.shortlabel,delete e.labelposition,delete e.labelalignment,delete e.labelconnectors,e}_redefineEntities(e){let t,o,a,n,i,l,s,c,d,g,h,b,p=this,u=p.config,m=p.getFromEnv("chart"),f={},v={},y=m.config.entities,C=u.useSNameAsId,O=0;for(t=e.length;t--;)if(o=e[t],a=o.internalid,n=o.newid?o.newid:a,i=o.sname,l=o.lname,b=y[a],a=Object(r["Xb"])(a),n=Object(r["Xb"])(n),n=n&&n.toLowerCase(),b){for(h in f[n]=c={origId:a},v[a]=!0,b)c[h]=b[h];c.shortLabel=i||b.shortLabel,c.label=l||b.label,c.showhovereffect=o.showhovereffect,c.fillhovercolor=o.fillhovercolor,c.fillhoveralpha=o.fillhoveralpha,c.fillhoverangle=o.fillhoverangle,c.fillhoverratio=o.fillhoverratio,c.borderhoverthickness=o.borderhoverthickness}for(s in g=p.components.data,g||(g=p.components.data={}),f)s=s.toLowerCase(),g[s]||(g[s]={config:{}}),g[s].config=f[s],O+=1;for(s in d=g,y)if(c=y[s],s=Object(r["Xb"])(s),!v[s]){for(h in C?(b=d[c.shortLabel.toLowerCase()],!b&&(b=d[c.shortLabel.toLowerCase()]={}),b.config={},b.origId=c.shortLabel):(b=d[s.toLowerCase()],!b&&(b=d[s.toLowerCase()]={}),b.config={},b.config.origId=s),c)b.config[h]=c[h];O+=1}u.entityCount=O}draw(){let e,t=this,o=t.config,a=t.getFromEnv("chart"),n=r["tb"]?200:10;t.createContainer(),this.config.ready=!1,o.BATCH_SIZE=n,o.labelBatchSize=r["tb"]?200:20,e=this._batchRender(),e(0),a.config.entityFlag=!0,a.checkComplete()}_batchRender(){let e,t,o,a,r,n=this,i=n.config,l=n.getFromEnv("chart"),s=l.config.entities.firstEntity,c=n.components.data,d=i.BATCH_SIZE,g=i.entityKeys=s?n._getKeys(s,c):Object.keys(c),h=i.entityLength=g.length,b=function(i){for(e=i,o=0;g[e]!==$;)if(t=c[g[e]],r=n.drawEntity(t,d),o+=r,t.config.drawn&&(a=e===h-1?t:c[g[e-1]],a&&(a.config.drawn=!1,a.config.outlineStartIndex=$),e++),o>=d){n.addJob("entityDraw",b.bind(this,e),k["b"].entitydraw);break}e===h&&(n._addEventListenersToEntities(0),n.initComplete())};return b}_addEventListenersToEntities(e){let t,o,a,r,n=this,i=n.components.data,l=n.config,s=l.BATCH_SIZE,c=l.entityKeys,d=l.entityLength,g=0;for(t=e;t<d;t++)if(o=i[c[t]],r=o.config,a=r.options,a&&!1===a.isDataEnabled||n.addMouseGestures(o),g++,g===s){n.addJob("_addEventListenersToEntities",n._addEventListenersToEntities.bind(this,t),k["b"].entitydraw);break}}static _getKeys(e,t){let o=[e],a=e;for(;t[a];)a=t[a].nextId,o.push(a);return o}_getDefaultTooltip(e,t){let o,a,r=this,n=e.config.cleanValue,i=e.config.formattedValue,l=r.getFromEnv("chart").config.entityOpts;if("object"==typeof e.config.options){if(a=t.labels&&t.labels[0],!a)return $;o=(l.useSNameInTooltip?a.shortText:a.text)+(null===n?oe:l.tooltipSepChar+i)}else o=(l.useSNameInTooltip?t.shortLabel:t.label)+(null===n?oe:l.tooltipSepChar+i);return o}drawEntity(e,t){let o,a,n,i,l,s,c,d,g,h=this,b=h.getFromEnv("chart"),p=b.getFromEnv("animationManager"),u=e.config,m=r["tb"]||!ee?"litepath":"path",f=b.config.entityOpts,v=u.outlines,y=h.getFromEnv("toolTipController"),C=this.getLinkedParent().getChildContainer("plot"),O=this.getLinkedParent().getChildContainer("plotShadow"),x=u.toolText,w=f.shadow,k=[],j={};if(h._configureEntityDrawingParams(e),u=e.config,n=u.visibleEntityAttr,g=u.shadowOptions,o=u.outlineStartIndex===$?v.length:u.outlineStartIndex,e.graphics||(e.graphics={}),c=0,k=u.outlinePath||(u.outlinePath=[]),d=u.customStrokeWidthModifier,"object"==typeof u.options){for(;o--;)if(k=v[o].outline,i=!0===u.options.isDataEnabled?n:Object(r["W"])(Object(r["W"])({},n),fe(v[o].style,d)),l=e.graphics.outlines,l||(l=e.graphics.outlines=[]),l[o]||(l[o]={}),s=l[o].outline,i[m]=k,s=l[o].outline=p.setAnimation({el:m,container:C,attr:i,component:h,label:"path"}),s.shadow(!!w&&g,O),y.enableToolTip(s,x),c++,u.outlineStartIndex=o,c===t)return c;return u.drawn=!0,c}for(;o--;)if(a=v[o],k=a.concat(k),c++,u.outlineStartIndex=o,c===t)return u.outlinePath=k,c;return e.graphics.outlines||(n[m]=k),Object.assign(j,n,e.hidden&&{"fill-opacity":0}||{}),e.graphics.outlines=p.setAnimation({el:e.graphics.outlines||m,container:C,attr:j,component:h,label:"path"}),u.drawn=!0,u.outlineStartIndex=0,u.outlinePath=[],e.graphics.outlines.shadow(!!w&&g,O),y.enableToolTip(e.graphics.outlines,x),c}_configureEntityDrawingParams(e){let t,o=this,a=o.getFromEnv("chart"),n=e.config,i=a.config.entityOpts,l=a.config.scalingParams,s=!ee||r["tb"],c=l.scaleFactor,d=l.strokeWidth,g=(s?a.baseScaleFactor:1)*d,h=1===i.scaleBorder,b=n.borderThickness,p=n.alphaArr,u=n.origConnectorThickness,m=n.hoverBorderThickness,f=n.visibleEntityAttr,v=f["fill-opacity"];n.shadowOptions={scalefactor:[c,c*a.config.baseScaleFactor],opacity:he.apply(de,p)/100,useFilter:0},n.fillOpacity=e.hidden?0:v,s?(b=n.entityBorderThickness=h?b*g:b/c,u/=c,t=h?c:l.sFactor,m&&(m=n.hoverBorderThickness=h?m*g:m/c)):(b=h?b*d:b,t=h?l.scaleFactor:a.baseScaleFactor),n.entityBorderThickness=b,n.connectorThickness=u,n.customStrokeWidthModifier=t,f["stroke-width"]=b,f.transform=r["tb"]||!ee?"":l.transformStr}drawLabels(e){let t,o,a,r,n=this,i=e,l=n.getFromEnv("chart"),s=n.config,c=s.labelBatchSize,d=s.entityLength,g=[],h=l.getChildContainer("upperAnnotationGroup"),b=0,p=n.getChildren("mapLabelAnnotations")&&n.getChildren("mapLabelAnnotations")[b],u=0,m=0,f=l.config.annotationConfig;for(t in p||(r=new Y["a"],n.attachChild(r,"mapLabelAnnotations"),p=n.getChildren("mapLabelAnnotations")[b],p.addCustomGroup(h)),p.destroy(),p._renderer&&(p._renderer=null),f.showbelow=0,i){if(n.drawLabel(i[t],g),u++,u===c){for(o=0;o<g.length;o++)g[o].animationLabel="entityLabel";for(a=p.addGroup(Object.assign(f,{id:"entityLabels"+b,items:g,animationLabel:"entityLabelGroup"}),n),o=0;o<a.items.length;o++)a.items[o].addEventListener("fc-mouseover",g[o].onmouseover),a.items[o].addEventListener("fc-mouseout",g[o].onmouseout),a.items[o].addEventListener("fc-click",g[o].onclick);b++,p=n.getChildren("mapLabelAnnotations")&&n.getChildren("mapLabelAnnotations")[b],p||(r=new Y["a"],n.attachChild(r,"mapLabelAnnotations"),p=n.getChildren("mapLabelAnnotations")[b],p.addCustomGroup(h)),p.destroy(),p._renderer&&(p._renderer=null),u=0,g=[]}else if(m==d-1){for(o=0;o<g.length;o++)g[o].animationLabel="entityLabel";for(a=p.addGroup(Object.assign(f,{id:"entityLabels"+b,items:g,animationLabel:"entityLabelGroup"}),n),o=0;o<a.items.length;o++)a.items[o].addEventListener("fc-mouseover",g[o].onmouseover),a.items[o].addEventListener("fc-mouseout",g[o].onmouseout),a.items[o].addEventListener("fc-click",g[o].onclick)}m++}n.drawLabelConnFn(0)}drawLabelConnFn(e){let t,o,a,r,n,i=this,l=i.config,s=i.components.data,c=l.BATCH_SIZE,d=l.entityKeys,g=d.length,h=0;for(o=e;o<g;o++){if(n=s[d[o]],r=n.config,"object"==typeof r.options)for(a=r.labels,t=a&&a.length||0;t--;)a[t].labelConnectors&&(i.drawLabelConnectors(n,a[t].labelConnectors,i),h++);else r.labelConnectors&&(i.drawLabelConnectors(n,r.labelConnectors,i),h++);if(h===c){i.addJob("drawLabelConnectors",i.drawLabelConnFn.bind(this,o),k["b"].entitydraw);break}}}_getLabelObject(e,t,o){let a,r,n,i,l,s,c,d,g,h,b,p,u,m,f,v,y=this,C=y.getFromEnv("chart"),O=e.config,x=C.config.scalingParams,w=e.graphics&&e.graphics.outlines,k=O.fontSize,j=O.labelPadding,L=O.labels||[],F=O.entityLabels||[];return t===$?(a=e.labelConfig,r=O.labelPosition,n=O.labelAlignment):(f=L[t],v=F[t],a=v.config,i=a.style=f.style,r=f.labelPosition,n=f.labelAlignment),r?(c=r[0],d=r[1]):(g=w.getBBox(),c=g.x+g.width/2,d=g.y+g.height/2),n?(h=n[0],b=n[1],h===ne?c-=j:h===ie&&(c+=j),b===ae?d-=j:b===re&&(d+=j)):(h=se,b=le),p=parseFloat(k)/x.sFactor,!o&&i&&(i.color&&(a.fontColor=i.color),i["font-size"]&&(p=parseFloat(i["font-size"])/x.sFactor),i["font-family"]&&(a.fontFamily=i["font-family"]),i["font-weight"]!==$&&(a.fontBold="bold"===i["font-weight"])),a.x=c.toString(),a.y=d.toString(),a.wrap=1,a.type="text",a.fontSize=p,{x:c.toString(),y:d.toString(),wrapwidth:ve[h](l,c+u)-j,wrapheight:ye[b](s,d+m)-j,wrap:1,type:"text",align:a.align,valign:a.vAlign,text:a.displayValue,tooltext:a.toolText,css:a.link!==$&&{cursor:"pointer",_cursor:"hand"},bgcolor:a.bgColor,bordercolor:a.borderColor,fillcolor:a.fontColor,fontsize:a.fontSize,font:a.fontFamily,bold:a.fontBold,onclick:function(t){let o,a,r=e.graphics.outlines;if(r instanceof Array)for(o=0,a=r.length;o<a;o++)y.entityClick(r[o].outline,t);else y.entityClick(r,t)},onmouseover:function(t){let o,a,r=e.graphics.outlines;if(r instanceof Array)for(o=0,a=r.length;o<a;o++)y.entityRollOver(r[o].outline,t);else y.entityRollOver(r,t)},onmouseout:function(t){let o,a,r=e.graphics.outlines;if(r instanceof Array)for(o=0,a=r.length;o<a;o++)y.entityRollOut(r[o].outline,t);else y.entityRollOut(r,t)},ontouchstart:function(t){let o,a,r=e.graphics.outlines;if(r instanceof Array)for(o=0,a=r.length;o<a;o++)y.entityRollOver(r[o].outline,t);else y.entityRollOver(r,t);y.entityRollOver(r,t)}}}drawLabel(e,t){let o,a,r,n=this,i=e.config,l=i.showLabel;if(l)if("object"==typeof i.options)for(r=i.labels,a=r&&r.length||0,o=i.options.isDataEnabled;a--;)t.push(n._getLabelObject(e,a,o,!a));else t.push(n._getLabelObject(e,$,!0,!0))}drawLabelConnectors(e,t,o){let a,n,i=e.config,l=this,s=l.getFromEnv("chart"),c=s.getFromEnv("animationManager"),d=s.config.scalingParams,g=o.getLinkedParent().getChildContainer("plot"),h=t&&t.length||0,b=i.showLabel;for(;h--;)n=t[h],a=e.graphics.connectorElem,b?e.graphics.connectorElem=a=c.setAnimation({el:e.graphics.connectorElem||"path",attr:{path:n,opacity:1,transform:r["tb"]||!ee?"":d.transformStr,stroke:Object(r["P"])(i.connectorColor,i.connectorAlpha),"shape-rendering":ce,"stroke-width":i.connectorThickness},container:g,component:l,label:"labelConnectors"}):a&&a.hide()}entityClick(e,t){let o=e.node.__entity,a=this,r=a.getFromEnv("chart"),n=r.config.scalingParams,i=e.getBBox(),l=r.getFromEnv("linkClickFN"),s=o.config,c=s.link;i.width*=n.scaleFactor,i.height*=n.scaleFactor,i.x=i.x*n.scaleFactor+n.translateX,i.y=i.y*n.scaleFactor+n.translateY,i.x2=i.x+i.width,i.y2=i.y+i.height,r.fireChartInstanceEvent("entityclick",s.eventArgs,t),c!==$&&l.call({link:c,entity:o,entityBox:i},!0)}entityRollOver(e,t){let o=e.node.__entity,a=this,r=o.config,n=a.getFromEnv("chart"),i=n.getFromEnv("animationManager"),l=r.hoverAttr;n.plotEventHandler(e,t,"entityRollOver"),e.data("hovered")?clearTimeout(o.config.timer):r.useHoverColor&&r.isVisible&&!o.hidden&&l&&(n.config.hoverEntity=e,i.setAnimation({el:e,attr:l,component:a,state:"updating",label:"path"}),e.data("hovered",!0))}entityRollOut(e,t){let o,a=e.node.__entity,r=this,n=r.getFromEnv("chart"),i=n.getFromEnv("animationManager"),l=a.config,s=l.revertAttr;n.plotEventHandler(e,t,"entityRollOut"),a.config.timer=setTimeout(function(){o=a.hidden,!0!==o&&s&&(i.setAnimation({el:e,attr:s,component:r,state:"updating",label:"path"}),e.data("hovered",!1))},100)}addMouseGestures(e){let t,o,a,n,i,l=e.config,s=l.originalId,c=this,d=e.graphics,g=l.useHoverColor,h=l.hoverBorderThickness,b=l.hoverBorderColor,p=l.hoverBorderAlpha,u=l.entityBorderThickness,m=l.borderColor,f=l.borderAlpha,v=l.link,y=l.visibleEntityAttr,C=function(t){v!==$&&t.css({cursor:"pointer",_cursor:"hand"}),t.data("eventArgs",l.eventArgs),t.data("groupId","groupId"+s),t.node.__entity=e,e._listenersBinded||t.on("fc-click",c.entityClick.bind(c,t)).hover(c.entityRollOver.bind(c,t),c.entityRollOut.bind(c,t))};for(t in l.eventArgs={value:l.cleanValue,label:l.label,shortLabel:l.shortLabel,originalId:l.origId,id:l.id||l.origId},l.legacyEventArgs={value:l.value,lName:l.label,sName:l.shortLabel,id:l.originalId||l.id},g&&(l.hoverAttr={fill:Object(r["Vb"])(l.hoverColor)},l.revertAttr={fill:Object(r["Vb"])(l.fillColor),stroke:Object(r["Vb"])(l.borderColor,l.borderAlpha)},l.revertAttr["fill-opacity"]=y["fill-opacity"],h!==u&&(l.hoverAttr["stroke-width"]=Object(r["Kb"])(h,u),l.revertAttr["stroke-width"]=u),(b!==m||p!==f)&&(l.hoverAttr.stroke=Object(r["P"])(b,p),l.revertAttr.stroke=Object(r["P"])(m,f))),d)if(d.hasOwnProperty(t))if(d[t]instanceof Array){for(i=d[t],o=0,n=i.length;o<n;o++)a=i[o].outline,C(a);e._listenersBinded=!0}else a=d[t],C(a),e._listenersBinded=!0}getDataLimits(){let e=this,t=e.config;return{max:t.max,min:t.min}}createContainer(){let e=this,t=e.getLinkedParent(),o=e.getFromEnv("animationManager"),a=t.getChildContainer("layer0");e.getChildContainer("abovePlotGroup")||e.addChildContainer("abovePlotGroup",o.setAnimation({el:"group",attr:{name:"abovePlotGroup",opacity:1},container:a,component:e,label:"group"})),e.getChildContainer("belowPlotGroup")||e.addChildContainer("belowPlotGroup",o.setAnimation({el:"group",attr:{name:"belowPlotGroup",opacity:1},container:a,component:e,label:"group"}))}initComplete(){let e=this,t=e.getFromEnv("chart"),o=e.components.data;this.drawLabels(o),t.config.entitiesReady=!0,t.checkComplete()}}var xe,we=Oe,ke=function(e,t,o,a,r){var n=Math.pow;return n(o-e,2)+n(a-t,2)<=n(r,2)},je=Math.PI,Le=Math.cos,Fe=Math.sin,Ie=Math.max,Se=Math.min,Ae=je/180,Ee=function(e){return e%360*Ae},_e=function(e,t,o,a,r,n){var i,l,s;return i=(a-t)*(r-o),l=(o-e)*(n-a),isNaN(i)&&(i=0),isNaN(l)&&(l=0),s=i-l,0===s?0:0<s?1:2},Pe=function(e,t,o,a,r,n){return!!(o<=Ie(e,r)&&o>=Se(e,r)&&a<=Ie(t,n)&&a>=Se(t,n))},Te=function(e,t,o,a,r,n,i,l){var s=_e(e,t,o,a,r,n),c=_e(e,t,o,a,i,l),d=_e(r,n,i,l,e,t),g=_e(r,n,i,l,o,a);return!(s===c||d===g)||!(0!==s||!Pe(e,t,r,n,o,a))||!(0!==c||!Pe(e,t,i,l,o,a))||!(0!==d||!Pe(r,n,e,t,i,l))||!(0!==g||!Pe(r,n,o,a,i,l))},Me=function(e,t,o,a,r,n,i){var l,s,c,d,g,h,b,p=0,u=!1;if(ke(e,t,o,a,r)&&3<=n){for(s=i===xe?.5*je:Ee(i),b=2*je/n,c=o+r*Le(-s),h=a+r*Fe(-s),l=0;l<n;l++){if(s+=b,d=o+r*Le(-s),g=a+r*Fe(-s),Te(c,h,d,g,e,t,1/0,t)){if(0===_e(c,h,e,t,d,g))return Pe(c,h,e,t,d,g);p++}c=d,h=g}u=0!=p%2}return u},Be=(e,t)=>!e||e&&t&&t.i>e.i?t:e;function Re(e){function t(e,t,o){var a=e[t];e[t]=e[o],e[o]=a}function o(e,t,a,i){var l,s={},c=i?"y":"x";return t===a?(s.point=e[t],s):1==a-t?(e[t][c]>e[a][c]?(s.point=e[t],s.left={point:e[a]}):(s.point=e[a],s.left={point:e[t]}),s):(l=t+a>>1,i?n(e,l,t,a):r(e,l,t,a),s.point=e[l],s.left=o(e,t,l-1,!i),s.right=o(e,l+1,a,!i),s)}var a,r,n,i=e&&e[0]&&e[0].r||5,l=Math.max,s=Math.floor,c=Math.sqrt,d=Math.min,g=Math.log,h=Math.exp,b=Math.pow;for(r=function(e,o,a,n){for(var i,b,p,u,m,f,v,y,C,O;n>a;){for(600<n-a&&(i=n-a+1,b=o-a+1,p=g(i),u=.5*h(2*p/3),m=.5*c(p*u*(i-u)/i)*(0>b-i/2?-1:1),f=l(a,s(o-b*u/i+m)),v=d(n,s(o+(i-b)*u/i+m)),r(e,o,f,v)),y=e[o],C=a,O=n,t(e,a,o),e[n].x>y.x&&t(e,a,n);C<O;){for(t(e,C,O),C++,O--;e[C].x<y.x;)C++;for(;e[O].x>y.x;)O--}e[a].x===y.x?t(e,a,O):(O++,t(e,O,n)),O<=o&&(a=O+1),o<=O&&(n=O-1)}},n=function(e,o,a,r){for(var i,b,p,u,m,f,v,y,C,O;r>a;){for(600<r-a&&(i=r-a+1,b=o-a+1,p=g(i),u=.5*h(2*p/3),m=.5*c(p*u*(i-u)/i)*(0>b-i/2?-1:1),f=l(a,s(o-b*u/i+m)),v=d(r,s(o+(i-b)*u/i+m)),n(e,o,f,v)),y=e[o],C=a,O=r,t(e,a,o),e[r].y>y.y&&t(e,a,r);C<O;){for(t(e,C,O),C++,O--;e[C].y<y.y;)C++;for(;e[O].y>y.y;)O--}e[a].y===y.y?t(e,a,O):(O++,t(e,O,r)),O<=o&&(a=O+1),o<=O&&(r=O-1)}},e=e||[],a=e.length;a--;)e[a].r>i&&(i=e[a].r),e[a].i=a,e[a].x=+e[a].x,e[a].y=+e[a].y;return{tree:0===e.length?{}:o(e,0,e.length-1,!1),search:function(e,t,o,a){function r(e,t,o,a){return c(b(e-o,2)+b(t-a,2))}function n(a,n){return"circle"===o?r(a,n,e,t)<=m:a>=m&&a<=f&&n>=v&&n<=y}function l(e,t,o){return e>=t&&e<=o}function s(o){var a=l(e,o.x1,o.x2)&&l(t,o.y1,o.y2),n=r(e,t,o.point.x,o.point.y);return g?void(a?C?o.point.i>g.point.i&&(g=o,C=a,O=n):(g=o,C=a,O=n):!C&&n<O&&(g=o,C=a,O=n)):(g=o,C=a,void(O=n))}function d(a,r){"circle"===o?m=a:(m=e-a||0,f=e+a||0,v=t-r||0,y=t+r||0)}var g,h,p,u=this.tree,m=e-i,f=e+i,v=t-i,y=t+i,C=!1,O=0;return a=a||{},p=function(e){var t,o;e&&e.point&&(t=a.rx||e.point.r,o=a.ry||e.point.r,d(t,o),n(e.point.x,e.point.y)&&s(e),v<=e.point.y&&h(e.left),y>=e.point.y&&h(e.right))},h=function(e){var t,o;e&&e.point&&(t=a.rx||e.point.r,o=a.ry||e.point.r,d(t,o),n(e.point.x,e.point.y)&&s(e),m<=e.point.x&&p(e.left),f>=e.point.x&&p(e.right))},h(u),g&&g.point||g}}}class Ke{constructor(e){var t=this;t.configure(e)}configure(e){var t=this;t.validatorFn=e?t.shapeValidator():t.defaultValidator()}defaultValidator(){var e=Math.pow,t=this;return function(o){var a=t.mousePoint;return!!(o&&1>=e((o.x-a.x)/t.xLimit,2)+e((o.y-a.y)/t.yLimit,2))}}shapeValidator(){var e=this;return function(t){var o,a,r,n,i,l,s,c,d,g=e.mousePoint,h=t&&t.shapeInfo,b=!1,p=g.x,u=g.y;return o=h&&h.type,"circle"===o?(r=h.radius,b=ke(p,u,t.x,t.y,r)):"arc"===o?(a=h.innerradius,r=h.radius,b=!ke(p,u,t.x,t.y,a)&&ke(p,u,t.x,t.y,r)):"polygon"===o?(r=h.radius,i=h.startAngle,n=h.sides,b=Me(p,u,t.x,t.y,r,n,i)):"rect"===o||"rectangle"===o?(l=t.x,c=t.y,s=l+(h.width||0),d=c+(h.height||0),b=p>=l&&p<=s&&u>=c&&u<=d):"default"===o&&(b=!1),b}}buildKdTree(e){return this.kdTree=Re(e),this.tree=this.kdTree.tree,this}getNeighbour(e,t,o){var a=this,r=a.tree,n={x1:e.x-a.xLimit,x2:e.x+a.xLimit,y1:e.y-a.yLimit,y2:e.y+a.yLimit},i=a.validatorFn;return a.mousePoint=e,t?this.kdTree&&this.kdTree.search(e.x,e.y,o,e.options):r?a._searchBtwnLimit(n,r,!0,i):void 0}_searchBtwnLimit(e,t,o,a){var r,n,i=this,l=o?"x":"y",s=o?e.x1:e.y1,c=o?e.x2:e.y2;if(r=t&&t.point&&t.point[l],r!==xe)return a(t.point)&&(n=t.point),r>=s&&t.left&&(n=Be(n,i._searchBtwnLimit(e,t.left,!o,a))),r<=c&&t.right&&(n=Be(n,i._searchBtwnLimit(e,t.right,!o,a))),n}_setSearchLimit(e,t){var o=this;o.xLimit=e,o.yLimit=t}}Ke.prototype.constructor=Ke;var De=Ke;let Ge,Ve="",We="top",Ne="bottom",He="right",ze="left",Xe="middle",Ye="center",Ue=.6,Je=window.Math,Ze=Je.min,$e=Je.max,qe="items",Qe=function(){let e,t=this,o=t.dataset.getFromEnv("chart"),a=t.dataset.getChildren("mapAnnotations")[0],n=t.markerShape,i=n.groupConfig,l=n.data("unfilteredConfig"),s=l._markerEventArgs,c=t.config;l.hovereffect&&("circle"===n.config.type&&(e=Object(r["W"])({fillcolor:l.hoverfillcolor,fillalpha:l.hoverfillalpha,fillangle:l.hoverfillangle,fillratio:l.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:1},l._hoverattrs)),e=Object(r["W"])({},l._hoverattrs),a.update(n.getId(),e)),s||(s=l._markerEventArgs={x:+l.x,y:+l.y,scaledX:l.x*i.scaleX,scaledY:l.y*i.scaleY,chartX:l.x*i.scaleX+i.grpXShift,chartY:l.y*i.scaleY+i.grpYShift,id:l.id,label:l.label}),Object(X["e"])(c.options.id,"markerRollOver",s,o.getFromEnv("chartInstance"),c,Ge,Ge,Ge)},et=function(){let e,t=this,o=t.dataset.getFromEnv("chart"),a=t.dataset.getChildren("mapAnnotations")[0],n=t.markerShape,i=n.getElement(),l=t.config,s=n.data("unfilteredConfig");i&&s.hovereffect&&("circle"===n.config.type&&(e=Object(r["W"])({fillcolor:n.config.rawColor,fillalpha:n.config.rawAlpha,fillangle:n.config.rawAngle,fillratio:n.config.rawRatio,gradientUnits:"objectBoundingBox",radialGradient:"radial"===n.config.rawFillPattern},s._defaultattrs)),e=Object(r["W"])({},s._defaultattrs),a.update(n.getId(),e)),Object(X["e"])(l.id,"markerRollOut",s._markerEventArgs,o.getFromEnv("chartInstance"),Ge,Ge,Ge)},tt=function(e){let t=this,o=t.config.options,a=t.dataset,r=a.getFromEnv("chart"),n=t.markerShape,i=n.config,l=n.groupConfig,s=a.getFromEnv("linkClickFN"),c=n.config.link,d=i._markerEventArgs;c&&s&&s.call({link:c},!0),d||(d=i._markerEventArgs={x:+i.x,y:+i.y,scaledX:i.x*l.scaleX,scaledY:i.y*l.scaleY,chartX:i.x*l.scaleX+l.grpXShift,chartY:i.y*l.scaleY+l.grpYShift,id:o.id,label:o.label}),r.fireChartInstanceEvent("markerClick",d,e)},ot=function(e,t){let o,a=e&&e.length||!1,r=t||"id",n={};if(!e)return e;for(;a--;)o=e[a],o[r]!==Ge&&(n[o[r].toLowerCase()]=o);return n};Object(c["a"])({name:"mapsAnimation",type:"animationRule",extension:J});class at extends we{constructor(){super(),this.components={},this.getLabelAlignment={top:function(e,t,o){return{x:e.toString(),y:(t-o).toString(),align:Ye,valign:We}},left:function(e,t,o){return{x:(e-o).toString(),y:t.toString(),align:He,valign:Xe}},right:function(e,t,o){return{x:(e+o).toString(),y:t.toString(),align:ze,valign:Xe}},bottom:function(e,t,o){return{x:e.toString(),y:(t+o).toString(),align:Ye,valign:Ne}},center:function(e,t){return{x:e.toString(),y:t.toString(),align:Ye,valign:Xe}}},this.getWrapWidth={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*Ze(t,e-t)}},this.getWrapHeight={top:function(){return arguments[1]},middle:function(e,t){return 2*Ze(t,e-t)},bottom:function(e,t){return e-t}},this.hoverFn=Qe,this.hoverOutFn=et,this.clickFn=tt}getName(){return"markers"}getType(){return"dataset"}configureAttributes(e){if(!e)return;this.JSONData=e;let t,o=this,a=o.getChildren("mapAnnotations")&&o.getChildren("mapAnnotations")[0],r=o.getFromEnv("chart"),n=r.config.markerOpts;a||(t=new Y["a"],o.attachChild(t,"mapAnnotations"),a=o.getChildren("mapAnnotations")[0]),a.destroy(),o.calculateDataLimits(),n.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}calculateMarkerRadiusLimits(){if(this.JSONData){let e=this,t=e.JSONData,o=e.config,a=e.getFromEnv("chart"),r=a.config.width,n=a.config.height,i=t.markermaxradius,l=t.markerminradius,s=at.getMarkerRadiusLimits(r,n,i,l);o.minRadius=s.min,o.maxRadius=s.max}}calculateDataLimits(){let e,t,o,a,r,n=this,i=n.getFromEnv("chart"),l=n.config,s=i.jsonData,c=s.markers||{},d=c[qe]||[],g=this.getFromEnv("number-formatter"),h=1/0,b=-1/0;for(r=0,o=d.length;r<o;r++)e=d[r],a=e.value,t=g.getCleanValue(a),null!==t&&(h=Ze(t,h),b=$e(t,b));l.min=h,l.max=b}_parseMarkers(){let e,t,o,a,n,i,l,s,c=this,d=c.getFromEnv("chart"),g=d.jsonData,h=g.markers,b=h[qe],p=h.shapes,u=d.config.markerOpts,m=this.getFromEnv("number-formatter"),f=c.components.shapeObjs={},v=c.components.markerObjs={};if(b&&b.length){if(p&&p.length)for(t=p.length;t;t-=1)a=p[t-1],(s=a.id.toLowerCase())&&(f[s]=a);for(t=b.length;t--;)a=b[t],(s=a.id&&a.id.toLowerCase())&&(e=a.value,e!==Ge&&""!==e&&(e=parseFloat(e)),o=at._initializeMarkerItem(s,a,null,d),n=o.config.options.shapeid,n&&"string"==typeof n&&(n=n.toLowerCase()),i=o.config,l=i.options,i.cleanValue=m.getCleanValue(e),i.formattedValue=null===i.cleanValue?Ge:m.dataLabels(e),i.fillColor=Object(r["Ib"])(l.fillcolor,l.color,u.fillColor),i.fillAlpha=Object(r["Ib"])(l.fillalpha,l.alpha,u.fillAlpha),i.fillRatio=Object(r["Ib"])(l.fillratio,u.fillRatio),i.fillAngle=Object(r["Ib"])(l.fillangle,u.fillAngle),i.borderThickness=Object(r["Kb"])(l.borderthickness,u.borderThickness),i.borderColor=Object(r["Ib"])(l.bordercolor,u.borderColor),i.borderAlpha=Object(r["Ib"])(l.borderalpha,u.borderAlpha),i.labelPadding=l.labelpadding||u.labelPadding,o.dataset=c,a.__hideMarker&&(o._isHidden=!0),n&&(o.shapeObj=f[n]),v[s]=o)}}defineMarkersNShapes(){let e,t,o,a,n,i,l,s,c=this,d=c.getFromEnv("chart"),g=d.jsonData,h=g.markers,b=h.definition,p=this.getFromEnv("number-formatter"),u=d.config.markerOpts,m=ot(b)||{},f=ot(h.application)||{},v=h.shapes,y=c.components.shapeObjs=c.components.shapeObjs||(c.components.shapeObjs={}),C=c.components.markerObjs=c.components.markerObjs||(c.components.markerObjs={}),O={},x={};if(b&&b.length){for(a in y)O[a]=!1;for(a in C)x[a]=!1;if(v&&v.length)for(a=v.length;a;a-=1)i=v[a-1],(s=i.id.toLowerCase())&&(y[s]=i,O[s]=!0);for(s in m)i=m[s],n=C[s]=at._initializeMarkerItem(s,i,f[s],d),x[s]=!0,n.dataset=c,l=n.config.options.shapeid,t=n.config,o=i.value,t.cleanValue=p.getCleanValue(o),e=t.options,t.formattedValue=null===t.cleanValue?Ge:p.dataLabels(o),t.fillColor=Object(r["Ib"])(e.fillcolor,e.color,u.fillColor),t.fillAlpha=Object(r["Ib"])(e.fillalpha,e.alpha,u.fillAlpha),t.fillRatio=Object(r["Ib"])(e.fillratio,u.fillRatio),t.fillAngle=Object(r["Ib"])(e.fillangle,u.fillAngle),t.borderThickness=Object(r["Kb"])(e.borderthickness,u.borderThickness),t.borderColor=Object(r["Ib"])(e.bordercolor,u.borderColor),t.borderAlpha=Object(r["Ib"])(e.borderalpha,u.borderAlpha),t.labelPadding=e.labelpadding||u.labelPadding,t.options.tooltext=Object(r["Ib"])(e.tooltext,u.tooltext),t.link=e.link,l&&(n.shapeObj=y[l.toLowerCase()]);for(a in O)O[a]||delete y[a];for(a in C)x[a]||delete C[a]}}static getMarkerRadiusLimits(e,t,o,a){let r=Ze(e,t),n=.02;return a=parseFloat(a),o=parseFloat(o),isNaN(a)||isNaN(o)?isNaN(a)?isNaN(o)?{min:n*r,max:3.5*n*r}:{min:parseInt(o/10,10),max:o}:{min:a,max:10*a}:a<o?{min:a,max:o}:{min:o,max:a}}getDataLimits(){let e=this,t=e.config;return{min:t.min,max:t.max}}static _initializeMarkerItem(e,t,o){let a,n={},i=n.config;return i||(i=n.config={}),i.id=e,i.definition=t,i.application=o,i.hasValue=null,i.value=null,i.options=null,i.label=null,i.markerShape=null,i.markerLabel=null,i.drawOptions={shape:null,label:null},i.drawComplete=!1,a=n.config.options=Object(r["W"])({},i.definition),i.dataEnabled?!isNaN(a.value)&&""!==a.value&&(n.value=parseFloat(a.value),n.hasValue=!0):i.applyAll?i.options=Object(r["W"])(a,i.application):o&&(i.options=Object(r["W"])(a,i.application)),n}configureConnectors(){let e,t,o,a,n,i,l,s,c,d,g,h,b,p,u,m=this,f=m.getFromEnv("chart"),v=m.getChildren("mapAnnotations")[0],y=f.jsonData,C=m.components,O=y.markers||{},x=O.connector||O.connectors||[],w=C.markerObjs,k=x.length,j=m.components.connectors,L=function(e){return function(t){let o=this,a=o.data("unfilteredConfig");a.hoverEffect&&v.update(o.getId(),a._hoverAttrs),f.fireChartInstanceEvent("connectorrollover",e,t)}},F=function(e){return function(t){let o=this,a=o.data("unfilteredConfig");a.hoverEffect&&v.update(o.getId(),a._defaultAttrs),f.fireChartInstanceEvent("connectorrollout",e,t)}},I=function(e){return function(t){f.fireChartInstanceEvent("connectorClick",e,t)}},S=f.config.connectorOpts,A={};for(j=m.components.connectors=[],u=0;u<k;u++)p=x[u],(p.from||p.to)&&(o=w[p.from.toLowerCase()],a=w[p.to.toLowerCase()],o&&a)&&(n=x[u].label,A=j[u],A||(A=j[u]={}),A.config||(e=A.config={}),A.graphics||(A.graphics={}),e=A.config=Object(r["W"])({},p),e.fromMarker=o,e.toMarker=a,e.link=p.link,e.showTooltip=Object(r["Kb"])(p.showtooltip,S.showTooltip),i=e.tooltext=e.showTooltip?Object(r["Ib"])(p.tooltext,S.tooltext):Ve,l=e.thickness=Object(r["Ib"])(p.thickness,S.thickness),s=e.color=Object(r["Ib"])(p.color,S.color),c=e.alpha=Object(r["Ib"])(p.alpha,S.alpha),e.hoverEffect=Object(r["Kb"])(p.showhovereffect,S.showHoverEffect),d=Object(r["Ib"])(p.hovercolor,S.hoverColor,s),g=Object(r["Ib"])(p.hoveralpha,S.hoverAlpha,c),h=Object(r["Ib"])(p.hoverthickness,S.hoverThickness,l),e.dashed=Object(r["Ib"])(p.dashed,S.dashed),e.dashLen=Object(r["Kb"])(p.dashlen,S.dashlen),e.dashGap=Object(r["Kb"])(p.dashgap,S.dashgap),i&&(e.tooltext=i=Object(r["Hb"])(Object(r["Gb"])(i,[3,40,41,42,43],{label:n,fromId:o.config.definition.id,toId:a.config.definition.id,fromLabel:o.config.definition.label,toLabel:a.config.definition.label},t))),e.eventArgs={fromMarkerId:o.config.id,toMarkerId:a.config.id,label:n},e._hoverAttrs={color:d,alpha:g,thickness:h},e._defaultAttrs={color:s,alpha:c,thickness:l},e.type="line",e.onclick=I(e.eventArgs),e.onmouseover=L(e.eventArgs),e.onmouseout=F(e.eventArgs),n&&(b=A.labelConfig,!b&&(b=A.labelConfig={}),b.type="text",b.text=n,b.align=Ye,b.valign=Xe,b.font=S.font,b.fillcolor=S.fontColor,b.bgcolor=S.labelBgColor,b.bordercolor=S.labelBorderColor,b.tooltext=e.tooltext))}draw(){let e,t,o,a,r,n,i,l=this,s=l.getFromEnv("chart"),c=l.config,d=l.getChildren("mapAnnotations")[0],g=l.components.markerObjs,h=s.config,b=h.markerOpts,p=h.scalingParams,u=s.config.annotationConfig,m=[],f=[],v={};for(r in l.createContainer(),l._drawConnectors(),l.imageLoadCount=0,l.imageCount=0,i=d.addGroup(Object.assign(u,{id:"markers",fillalpha:"100",items:m,scaleimages:1}),l),n=d.addGroup(Object.assign(u,{id:"markerLabels",items:f,scaleimages:1}),l),l.components.markerGroup=i,l.components.markerLabelGroup=n,c.autoScale=b.autoScale?p.sFactor:1,g)e=null,t=g[r],a=t.config,a.conIsHidden||(e=this._drawMarkerItem.call(t)),e&&(a._annotationIndex=m.length,v[r]=t,e.markerShape&&(o=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem",autoscale:"image"===e.markerShape.type?0:1},e.markerShape),t.markerShape=d.addItem(i.getId(),o,l)),t.markerShape.data("unfilteredConfig",o),m.push(t.markerShape),e.markerLabel&&(o=Object.assign({animationLabel:"markerItem"},e.markerLabel),t.markerLabel=d.addItem(n.getId(),o,l),t.markerLabel.data("unfilteredConfig",o)),f.push(t.markerLabel));l.addJob("buildKdtree",l._buildKdTree.bind(l),k["b"].kdTree)}_buildKdTree(){let e,t,o=this,a=o.components.kdArrayMap,r=o.components.markerGroup,n=[],i=r&&r.items,l=i&&i.length||0;for(t=0;t<l;t++)e=i[t].config.id,a[e]&&n.push(a[e]);o.components.kDTree||(o.components.kDTree=new De(!0)),o.components.kDTree._setSearchLimit(1/0,1/0),o.components.kDTree.buildKdTree(n)}_drawMarkerItem(){let e,t,o,a,n,i,l,s,c,d,g,h,b,p,u,m,f,v,y=this,C=y.dataset,O=C.getFromEnv("chart"),x=O.config,w=C.config,k=x.scalingParams,j=y.config,L=j.options,F=j.definition,I=x.markerOpts,S=I.dataLabels.style,A=L.shapeid,E=L.scale||1,_=L.label||Ve,P=O.config.scalingParams.scaleFactor*O.config.baseScaleFactor,T=(L.labelpos||We).toLowerCase(),M=j.formattedValue===Ge?Ge:j.formattedValue,B=L.tooltext||I.tooltext,R=Object(r["Kb"])(F.radius,j.radius,I.radius)*E*w.autoScale||1e-4,K=j.fillColor,D=j.fillAlpha,G=j.fillRatio,V=j.fillAngle,W=j.borderThickness,N=j.borderColor,H=j.borderAlpha,z=C.getChildren("mapAnnotations")[0],X=C.components.kdArrayMap||(C.components.kdArrayMap={}),Y=y.config.id;if(j.autoScale=I.autoScale?P:1,A)return B=B?Object(r["Hb"])(Object(r["Gb"])(B,[1,2,3],{formattedValue:M,label:_},L)):M?_+I.tooltipSepChar+M:_,M!==Ge&&null!==M?_=_+I.labelSepChar+M:isNaN(E)?E=1:0>E?E=0:5<E&&(E=5),Object(r["W"])(L,{x:L.x&&L.x.toString(),y:L.y&&L.y.toString(),fillcolor:K,fillalpha:D,fillratio:G,fillangle:V,borderthickness:W,bordercolor:N,borderalpha:H,hovereffect:Object(r["Ib"])(I.showHoverEffect),radius:R&&R.toString(),link:L.link,showshadow:Object(r["Kb"])(L.showshadow,j.shadow),_markerLabel:_,_markerId:L.id,id:(L.id+Ve).toLowerCase()}),delete L.tooltext,j.tooltext=!!I.showTooltip&&B,b=+L.x*k.sFactor+k.translateX,p=+L.y*k.sFactor+k.translateY,R=L.radius,"triangle"===A?(Object(r["W"])(L,{type:"polygon",sides:3,startangle:I.startAngle}),v="polygon",f=3):"diamond"===A?(Object(r["W"])(L,{type:"polygon",sides:4,startangle:I.startAngle}),v="polygon",f=4):"arc"===A?(m=R*Ue,Object(r["W"])(L,{type:"arc",startangle:0,endangle:360,innerradius:m}),v="arc"):"circle"===A?(L.type="circle",v="circle"):(g=C.getShapeArgs.call(y),I.dataEnabled&&I.valueToRadius&&L.radius!==Ge?delete g.radius:(!g.radius&&(g.radius=I.radius),g.radius*=E*j.autoScale),Object(r["W"])(L,g),L.id=L._markerId&&L._markerId.toLowerCase(),m=g.innerradius,g.radius&&(R=g.radius),v=g.type&&g.type.toLowerCase(),f=g.sides,R=+R,R&&m&&R<m&&(h=R,L.radius=R=m,L.innerradius=m=h)),L.type=L.type&&L.type.toLowerCase(),Object(r["W"])(L,{hoverfillcolor:Object(r["Ib"])(L.fillhovercolor,I.hoverFillColor,L.fillcolor),hoverfillalpha:Object(r["Ib"])(L.fillhoveralpha,I.hoverFillAlpha,L.fillalpha),hoverfillratio:Object(r["Ib"])(L.fillhoverratio,I.hoverFillRatio,L.fillratio),hoverfillangle:Object(r["Ib"])(L.fillhoverangle,I.hoverFillAngle,L.fillangle),hoverborderthickness:Object(r["Kb"])(L.borderhoverthickness,I.hoverBorderThickness,L.borderthickness),hoverbordercolor:Object(r["Ib"])(L.borderhovercolor,I.hoverBorderColor,L.bordercolor),hoverborderalpha:Object(r["Ib"])(L.borderhoveralpha,I.hoverBorderAlpha,L.borderalpha)}),L._hoverattrs={fillalpha:L.hoverfillalpha,fillcolor:L.hoverfillcolor,fillangle:L.hoverfillangle,fillratio:L.hoverfillratio,borderThickness:"0"===L.showborder?0:L.hoverborderthickness,borderColor:L.hoverbordercolor,borderAlpha:L.hoverborderalpha},L._defaultattrs={fillalpha:L.fillalpha,fillcolor:L.fillcolor,fillangle:L.fillangle,fillratio:L.fillratio,borderThickness:"0"===L.showborder?0:L.borderthickness,borderColor:L.bordercolor,borderAlpha:L.borderalpha},"image"===L.type?(L.borderthickness=L.borderthickness||0,L.onload=function(e){let t=this,o=e.width,a=e.height;u={},L=t.config,b=(+L.derivedX-o/(2*k.sFactor))*k.sFactor,p=(+L.derivedY-a/(2*k.sFactor))*k.sFactor,u=X[Y]||(X[Y]={}),u.x=b+k.translateX,u.y=p+k.translateY,u.element=y,u.shapeInfo={type:"rect",width:o,height:a},o&&a&&z.update(t.getId(),{x:b,y:p,width:o,height:a,autoscale:0}),C.imageLoadCount++,C.imageLoadCount===C.imageCount&&C._buildKdTree()},L.onerror=function(){C.imageLoadCount++,C.imageLoadCount===C.imageCount&&C._buildKdTree()},C.imageCount++):(u=X[Y]||(X[Y]={}),u.x=b,u.y=p,u.element=y,u.shapeInfo={type:v,sides:f,radius:+R+L.borderthickness/2,innerradius:m}),j.drawOptions.shape=L,I.showLabels?(d=L.labelpadding||I.labelPadding,e=C._getLabelOptions(T,d,L),t=e.align,o=e.valign,a=j._labelBaseWidth,n=j._labelBaseHeight,i=j._labelXOffset,l=j._labelYOffset,s=I.labelWrapWidth?I.labelWrapWidth:C.getWrapWidth[t](a,+e.x+i),c=I.labelWrapHeight?I.labelWrapHeight:C.getWrapHeight[o](n,+e.y+l),s>d&&(s-=d),c>d&&(c-=d),j.drawOptions.label=Object(r["W"])({type:"text"},{text:_,tooltext:L.tooltext,x:e.x,y:e.y,align:t,valign:e.valign,wrap:1,wrapwidth:s,wrapheight:c,fontsize:S.fontSize/k.sFactor,font:S.fontFamily,fillcolor:S.fontColor}),{markerShape:L,markerLabel:j.drawOptions.label}):{markerShape:L}}highlightPoint(e,t){let o=e.element,a=this,r=t.originalEvent,n=a.getFromEnv("chart"),i=a.getFromEnv("toolTipController"),l=a.config.currentToolTip,s=n.config.lastHoveredPoint;s&&s!==e&&(s&&a.hoverOutFn.call(s.element),n.config.lastHoveredPoint=null,i.hide(l)),!1===e||("click"===t.type||"touchstart"===t.type?(n.config.lastHoveredPoint!==e&&a.hoverFn.call(o),a.clickFn.call(o,t)):"mousemove"===t.type&&n.config.lastHoveredPoint!==e&&a.hoverFn.call(o),o.config.tooltext&&(l?i.draw(r,o.config.tooltext,l):l=a.config.currentToolTip=i.draw(r,o.config.tooltext)),n.config.lastHoveredPoint=e)}_drawConnectors(){let e,t,o,a,r,n,i,l,s,c,d=this,g=d.getFromEnv("chart"),h=g.config.annotationConfig,b=d.components,p=b.connectors||(d.components.connectors=[]),u=p.length,m=g.config.scalingParams,f=g.config.connectorOpts,v=f.showLabels,y=d.getChildren("mapAnnotations")[0],C=[],O=[],x=[];for(x.push({id:"connectorLabels",fillalpha:"100",items:O}),x.push({id:"connectors",fillalpha:"100",items:C}),y.addGroup(Object.assign(h,x[1]),d),y.addGroup(Object.assign(h,x[0]),d),o=0;o<u;o++)p[o]&&(l=p[o].config.fromMarker.config,s=p[o].config.toMarker.config,a=l.options.x,r=l.options.y,n=s.options.x,i=s.options.y,p[o].config.x=a,p[o].config.y=r,p[o].config.tox=n,p[o].config.toy=i,C.push(p[o].config),c=Object.assign({animationLabel:"markerItem"},p[o].config),e=y.addItem("connectors",c,d),e&&e.data("unfilteredConfig",c),e.addEventListener("fc-mouseover",p[o].config.onmouseover),e.addEventListener("fc-mouseout",p[o].config.onmouseout),e.addEventListener("fc-click",p[o].config.onclick),p[o].labelConfig&&v&&(p[o].labelConfig.x=((+a+ +n)/2).toString(),p[o].labelConfig.y=((+r+ +i)/2).toString(),p[o].labelConfig.fontsize=f.fontSize/(m.scaleFactor*g.config.baseScaleFactor),O.push(p[o].labelConfig),c=Object.assign({animationLabel:"markerItem"},p[o].labelConfig),t=y.addItem("connectorLabels",c,d),t&&t.data("unfilteredConfig")))}getShapeArgs(){let e,t=this,o=t.config,a=Object(r["W"])({},t.shapeObj);return o.autoScale=1,a?("polygon"===a.type?3>a.sides?a.type="circle":a.startangle=o.startAngle:"arc"===a.type&&(e=(a.radius||o.markerRadius)*o.autoScale,a.radius=e,a.innerradius=a.innerradius&&a.innerradius*o.autoScale||e*Ue),a):null}_getLabelOptions(e,t,o,a,r){let n,i,l,s=this,c=e&&e.toLowerCase();return s.getLabelAlignment[c]||(c="center"),i=+o.x,l=+o.y,n=a===Ge||r===Ge?o.radius||0:/^(top|bottom)$/gi.test(c)&&.5*r||/^(left|right)$/gi.test(c)&&.5*a||0,n=+n+ +t,s.getLabelAlignment[c](i,l,n)}addMarkerItem(e){let t,o,a,n,i,l,s,c=this,d=c.getFromEnv("chart"),g=e,h=c.components.markerObjs,b=c.components.shapeObjs,p=c.components.markerGroup,u=c.components.markerLabelGroup,m=c.getChildren("mapAnnotations")[0],f=c.getFromEnv("number-formatter"),v=d.config.markerOpts;if(s=g.id.toLowerCase()){if(h[s])return;delete g.value,c.imageLoadCount=0,t=at._initializeMarkerItem(s,g,null),t.dataset=c,l=t.config.options.shapeid,a=t.config,i=g.value,a.cleanValue=f.getCleanValue(i),e=a.options,a.formattedValue=null===a.cleanValue?Ge:f.dataLabels(i),a.fillColor=Object(r["Ib"])(e.fillcolor,e.color,v.fillColor),a.fillAlpha=Object(r["Ib"])(e.fillalpha,e.alpha,v.fillAlpha),a.fillRatio=Object(r["Ib"])(e.fillratio,v.fillRatio),a.fillAngle=Object(r["Ib"])(e.fillangle,v.fillAngle),a.borderThickness=Object(r["Kb"])(e.borderthickness,v.borderThickness),a.borderColor=Object(r["Ib"])(e.bordercolor,v.borderColor),a.borderAlpha=Object(r["Ib"])(e.borderalpha,v.borderAlpha),a.labelPadding=e.labelpadding||v.labelPadding,a.options.tooltext=Object(r["Ib"])(e.tooltext,v.tooltext),a.link=e.link,l&&(t.shapeObj=b[l&&l.toLowerCase()]),h[s]=t,o=c._drawMarkerItem.call(t),p&&u&&(o.markerShape&&(n=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem",autoscale:"image"===o.markerShape.type?0:1},o.markerShape),t.markerShape=m.addItem(p.getId(),n,c),t.markerShape.data("unfilteredConfig",n)),o.markerLabel&&(n=Object.assign({animationLabel:"markerItem"},o.markerLabel),t.markerLabel=m.addItem(u.getId(),n,c),t.markerLabel.data("unfilteredConfig",n))),c._buildKdTree()}}updateMarkerItem(e,t){let o,a,n,i,l=this,s=l.getFromEnv("chart"),c=l.getChildren("mapAnnotations")[0],d=l.components.markerObjs,g=s.config.markerOpts,h={},b=d[e];if(b){for(a in o=b.config.options,Object(r["W"])(o,t),l.imageLoadCount=0,n=b.config,t)h[a.toLowerCase()]=t[a]&&t[a].toString();n.fillColor=Object(r["Ib"])(h.fillcolor,h.color,g.fillColor),n.fillAlpha=Object(r["Ib"])(h.fillalpha,h.alpha,g.fillAlpha),n.fillRatio=Object(r["Ib"])(h.fillratio,g.fillRatio),n.fillAngle=Object(r["Ib"])(h.fillangle,g.fillAngle),n.borderThickness=Object(r["Kb"])(h.borderthickness,g.borderThickness),n.borderColor=Object(r["Ib"])(h.bordercolor,g.borderColor),n.borderAlpha=Object(r["Ib"])(h.borderalpha,g.borderAlpha),n.labelPadding=h.labelpadding||g.labelPadding,n.options.tooltext=Object(r["Ib"])(h.tooltext,g.tooltext),n.link=h.link,i=l._drawMarkerItem.call(b).markerShape,l._buildKdTree(),c.update(e,i)}}createContainer(){let e=this,t=e.getLinkedParent(),o=e.getFromEnv("animationManager"),a=t.getChildContainer("layer1");e.getChildContainer("abovePlotGroup")||e.addChildContainer("abovePlotGroup",o.setAnimation({el:"group",attr:{name:"abovePlotGroup",opacity:1},container:a,component:e,label:"group"})),e.getChildContainer("belowPlotGroup")||e.addChildContainer("belowPlotGroup",o.setAnimation({el:"group",attr:{name:"belowPlotGroup",opacity:1},container:a,component:e,label:"group"}))}_removeMarkerItem(e){let t,o,a=this,r=a.components,n=r.markerObjs,i=n[e],l=r.kdArrayMap;i&&(t=i.markerShape,o=i.markerLabel,t&&t.dispose(),o&&o.dispose(),delete l[e],a._buildKdTree()),delete n[e]}getElement(e){let t=this;if(t.components.kDTree)return t.components.kDTree.getNeighbour(e)}}var rt=at;Object(c["a"])({name:"mapsAnimation",type:"animationRule",extension:J});class nt extends s["a"]{getType(){return"group"}getName(){return"mapGroup"}configure(){let e=this;e._mapChildren(e=>{e.configure&&e.configure()})}createContainer(){let e,t=this,o=t.getLinkedParent(),a=t.getFromEnv("animationManager"),r=o.getChildContainer();e=r.plotGroup,t.getChildContainer("plotShadow")||t.addChildContainer("plotShadow",a.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:e,component:t,label:"group"})),t.getChildContainer("plot")||t.addChildContainer("plot",a.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:e,component:t,label:"group"})),t.getChildContainer("layer0")||t.addChildContainer("layer0",a.setAnimation({el:"group",attr:{name:"ann-layer0",opacity:1},container:r.abovePlotGroup,component:t,label:"group"})),t.getChildContainer("layer1")||t.addChildContainer("layer1",a.setAnimation({el:"group",attr:{name:"ann-layer1",opacity:1},container:r.abovePlotGroup,component:t,label:"group"})),o.config.labelsOnTop?t.getChildContainer("layer0").toFront():t.getChildContainer("layer0").toBack()}_transformGroup(){let e=this,t=this.getFromEnv("chart"),o=t.getFromEnv("chartInstance"),a=e.getFromEnv("animationManager"),n=t.jsonData,i=e.getChildContainer("plot"),l=e.getChildContainer("plotShadow"),s=t.config.scalingParams;i.hide(),l.hide(),t.config.entitiesReady=!1,o.addEventListener("internal.mapdrawingcomplete",function(){return function(t){t.detachHandler(),r["tb"]&&(o.args.link&&o.args.clickedEntityBox&&n.chart.linkedcharttransition,i&&a.setAnimation({el:i,attr:{transform:s.transformStr},component:e,label:"group"}),l&&a.setAnimation({el:l,attr:{transform:s.transformStr},component:e,label:"group"})),i.show(),l.show()}}()),t.checkComplete()}draw(){this.createContainer(),this._transformGroup()}getDataLimits(e){let t,o=this,a=1/0,r=-1/0,n=0,i=function(e){r=Math.max(r,e.max),a=Math.min(a,e.min)};return o._mapChildren(o=>o.getState("removed")||!1===o.getState("visible")?void(e&&(t=o.getDataLimits(e),i(t))):(n++,t=o.getDataLimits(e),void i(t))),n?o.setState("visible",!0):o.setState("visible",!1),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:r,min:a}}}var it=nt,lt=function(e){var t,o=e.getFromEnv("dataSource"),a=o.data||{},n=o.markers;Object(r["O"])(e,it,"mapGroup"),t=e.getChildren("mapGroup")[0],Object(r["T"])(t,we,"entities",1,[a]),n?Object(r["T"])(t,rt,"markers",1,[n]):e.getDatasets()[1]&&e.getDatasets()[1].remove()},st=o("1f2b");let ct,dt=function(e,t,o){let a=e[0],n=e[1],i=e[2],l=a+(t[0]-a)*o,s=n+(t[1]-n)*o,c=i+(t[2]-i)*o;return{hex:(r["e"]+(l<<16|s<<8|c).toString(16)).slice(-6),rgb:[l,s,c]}};class gt extends s["a"]{constructor(){super();let e=this;e.mapByCategory=!1,e.colorArr=[],e.noValidRange=!0,e.sortLegend=!1}__setDefaultConfig(){super.__setDefaultConfig(),this.config.defaultObj={code:"CCCCCC",alpha:"100"}}getType(){return"colorComponent"}getName(){return"colorBucket"}configure(e){if(!e)return;let t,o,a,n,i,l,s,c,d,g,h,b=this,p=b.mapByCategory,u=e.numberFormatter,m=e.colorRange||{},f=Object(r["W"])([],m.color),v=this.getLinkedParent(),y=b.getFromEnv("dataSource"),C=Math.min(Math.max(Object(r["Kb"])(y.chart.palette,0)-1,0),4),O=v.defaultPaletteOptions&&v.defaultPaletteOptions.paletteColors[C],x=Object(r["Kb"])(u.getCleanValue(m.maxvalue),1/0),w=Object(r["Kb"])(u.getCleanValue(m.minvalue),-1/0),k=b.colorArr;if(e.mapByCategory!==ct&&(p=b.mapByCategory=!!+e.mapByCategory),f=p?f.filter(e=>e.code||e.color):f.filter(e=>e.minvalue||e.maxvalue),f.forEach(e=>{e.minvalue&&e.maxvalue&&+e.maxvalue<+e.minvalue&&(c=e.maxvalue,e.maxvalue=e.minvalue,e.minvalue=c),e.minvalue?e.maxvalue?(g=u.getCleanValue(e.minvalue),d=u.getCleanValue(e.maxvalue),e.rangeLabel=u.dataLabels(g)+"-"+u.dataLabels(d)):(g=u.getCleanValue(e.minvalue),e.maxvalue=d=x,e.rangeLabel=d===1/0?">"+u.dataLabels(g):u.dataLabels(g)+"-"+u.dataLabels(d)):(e.minvalue=g=w,d=u.getCleanValue(e.maxvalue),e.rangeLabel=g===-1/0?"<"+u.dataLabels(d):u.dataLabels(g)+"-"+u.dataLabels(d))}),f.sort((e,t)=>+e.minvalue==+t.minvalue?e.maxvalue-t.maxvalue:e.minvalue-t.minvalue),f&&(t=f.length)){for(k.length=0,o=0;o<t;o+=1)s=f[o],a=Object(r["Ib"])(s.color,s.code,O&&O[o]),n=Object(r["Ib"])(s.alpha),l=Object(r["Ib"])(s.bordercolor),i=Object(r["Ib"])(s.borderalpha,100),d=Object(r["Kb"])(s.maxvalue),g=Object(r["Kb"])(s.minvalue),h=Object(r["Ib"])(s.label,s.displayvalue,s.rangeLabel),(a&&d>=g||p&&h)&&k.push({code:a,alpha:n||"100",oriAlpha:n,maxvalue:d,minvalue:g,label:Object(r["Hb"])(h),labelId:h.toLowerCase(),bordercolor:l,borderAlpha:i,name:s.name});b.sortedColorArr=b.colorArr.slice(0)}else b.noValidRange=!0,b.colorArr=[],b.sortedColorArr=[]}getColorObj(e){if(e===ct)return{outOfRange:!0};let t,o,a=this,n=a.sortedColorArr,i=a.gradient?1:0,l=n[i];if(a.mapByCategory){for(e=Object(r["Hb"])(e).toLowerCase()||e.toString().toLowerCase();l;){if(l.labelId===e||l.maxvalue>=e&&l.minvalue<=e)return{code:l.code,alpha:l.alpha||"100",oriAlpha:l.oriAlpha,seriesIndex:i,legendItemId:l.legendItemId};i+=1,l=n[i]}return{outOfRange:!0}}if(a.gradient){if(a.scaleMin<=e&&a.scaleMax>=e){for(;l&&l.maxvalue<e;)i+=1,l=n[i];return o=(e-l.minvalue)/l.range,{code:dt(n[i-1].codeRGB,l.codeRGB,o).hex}}return{outOfRange:!0}}for(;l;){if(e<l.minvalue&&!t)return 0==i?{code:l.code,alpha:l.alpha||"100",oriAlpha:l.oriAlpha,seriesIndex:i,name:l.name,label:l.label,outOfRange:!0,bordercolor:l.bordercolor,borderalpha:l.borderAlpha}:{code:n[i-1].code,alpha:n[i-1].alpha||"100",oriAlpha:n[i-1].oriAlpha,seriesIndex:i,name:n[i-1].name,label:n[i-1].label,outOfRange:!0,bordercolor:n[i-1].bordercolor,borderalpha:n[i-1].borderAlpha};if(e>l.maxvalue&&i==n.length-1)return{code:l.code,alpha:l.alpha||"100",oriAlpha:l.oriAlpha,seriesIndex:i,name:l.name,label:l.label,outOfRange:!0,bordercolor:l.bordercolor,borderalpha:l.borderAlpha};if(l.maxvalue>e&&l.minvalue<=e)return{code:l.code,alpha:l.alpha||"100",oriAlpha:l.oriAlpha,seriesIndex:i,name:l.name,label:l.label,bordercolor:l.bordercolor,borderalpha:l.borderAlpha};if(e===l.maxvalue&&(t={code:l.code,alpha:l.alpha||"100",oriAlpha:l.oriAlpha,seriesIndex:i,name:l.name,label:l.label,bordercolor:l.bordercolor,borderalpha:l.borderAlpha}),i==n.length-1&&t)return t;i+=1,l=n[i]}return n.length?void 0:{outOfRange:!0}}getColorRangeArr(e,t){var o,a,n,i,l,s,c,d,g=this.colorArr,h=[];if(!this.defaultAsigned&&(e>t&&(o=e,e=t,t=o),e<t&&(i=this.getColorObj(e),s=this.getColorObj(t),i&&s))){for(l=e,a=i.seriesIndex,n=s.seriesIndex;a<=n;a+=1)c=Object(r["W"])({},g[a]),c.minvalue!==l&&(c.minvalue=l),h.push(c),d=c,l=c.maxvalue;d&&(d.maxvalue=t)}return h}}var ht=gt;let bt,pt=",",ut=(e,t,o)=>{var a,n,i=Math.round,l=e.value,s=e.code,c=Object(r["m"])(s),d=t.value,g=t.code,h=Object(r["m"])(g);return a=d-l,n=[i(c[0]+(h[0]-c[0])/a*(o-l)),i(c[1]+(h[1]-c[1])/a*(o-l)),i(c[2]+(h[2]-c[2])/a*(o-l))],Object(r["A"])(n)};class mt extends s["a"]{constructor(){super(),this.colorRange={},this.valueRatio={},this.data={},this.mapByPercent=void 0}getType(){return"colorComponent"}getName(){return"gradientColorRange"}configure(e){if(!e)return;let t,o,a,r=this;for(r.data=e,r.appender="",a=r.colorRange=e.colorRange.sort(function(e,t){return e.value-t.value}),r.valueRatio=bt,r.values=[],t=0,o=a.length;t<o;t++)r.values.push(a[t].value)}getValueRatio(){var e,t,o,a=this.colorRange,r=a.length,n=this.valueRatio,i=a[r-1].value,l=a[0].value,s=0;if(n)return n;for(n=this.valueRatio=[],t=0;t<r;t++)e=a[t],o=(e.value-l)/(i-l),n.push(100*(o-s)),s=o;return n}getCumulativeValueRatio(){var e,t,o=this.colorRange,a=o.length,r=o[0].value,n=o[a-1].value,i=[];for(t=0;t<a;t++)e=o[t],i.push((e.value-r)/(n-r)*100);return i}getBoxFill(e){var t,o,a,n,i=this.colorRange,l=i.length,s=[];for(n=e?90:0,o=0;o<l;o++)t=i[o],s.push(t.code);return a={FCcolor:{alpha:"100,100,100",angle:n,color:s.join(pt),ratio:this.getValueRatio().join(pt)}},Object(r["Vb"])(a)}getColorByValue(e){var t,o,a,r,n=this.values,i=this.colorRange;if(e!==bt&&null!==e){for(o=0,t=n.length;o<t;o++){if(e===n[o]){r=i[o].code;break}if(!o&&e<n[o]){a=!0;break}if(o===t-1&&e>n[o]){a=!0;break}if(e>n[o]&&e<n[o+1]){r=ut(i[o],i[o+1],e);break}}return a?void 0:r}}}var ft=mt;function vt(e){return Object(r["jb"])(e,1)}function yt(e){return Object(r["rb"])(e||wt)||wt}let Ct,Ot="rgba(192,192,192,"+(r["zb"]?.002:1e-6)+")",xt="%",wt="#000000",kt=function(){function e(e){var o,a,r,n=t.getFromEnv("number-formatter");for(o=0,a=e.length;o<a;o++)r=e[o].maxvalue,r&&(e[o].maxvalue=n.getCleanValue(r))}var t,o={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return o.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(r["Vb"])({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},o.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:Ot,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:Ot,stroke:"#FFFFFF"}}},o.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(e){t=e.chart},legacyDataParser:function(o,a){var n,i,l,s,c,d,g,h,b,p,u,m,f=Math.max,v=Math.min,y={},C=t.getFromEnv("number-formatter"),O=t.getFromEnv("dataSource"),x=O.dataset,w=O.data;if(a=a||{},!o)return!1;for("maps"!==t.defaultDatasetType||a.min!==Ct&&a.max!==Ct?"HeatMap"===t.getName()&&(a.min===Ct||a.max===Ct)&&(a={min:1/0,max:-1/0},x.forEach(e=>{e.data&&e.data.forEach(e=>{a.min=v(a.min,Object(r["Kb"])(e.value,a.min)),a.max=f(a.max,Object(r["Kb"])(e.value,a.max))})})):(a={min:1/0,max:-1/0},w&&w.forEach(e=>{a.min=v(a.min,Object(r["Kb"])(e.value,a.min)),a.max=f(a.max,Object(r["Kb"])(e.value,a.min))})),y.mapByPercent=u=!!Object(r["Kb"])(o.mapbypercent,0),n=o.color||[],o.minvalue===Ct&&(o.minvalue=a.min===Ct?0:u?0:a.min),o.maxvalue===Ct&&(o.maxvalue=a.max===Ct?100:u?100:a.max),(o.maxvalue===o.minvalue||a.min===1/0||a.max===-1/0)&&(o.minvalue=0,o.maxvalue=100),m=!1,c=0,g=n.length;c<g;c++)if(n[c].maxvalue){m=!0;break}for(m||(n=[]),l=o.code,h=y.colorRange=[],y.gradient=!!Object(r["Kb"])(o.gradient,1),n.length?l=yt(l):(l?(s=yt(l),l=yt()):(l=yt(),s=vt(l)),n.push({code:s,maxvalue:o.maxvalue,label:Ct})),e(n),n=n.sort(function(e,t){return e.maxvalue-t.maxvalue}),b=p=o.minvalue&&C.getCleanValue(o.minvalue),p=(b!==Ct||null!==b)&&(u?b+xt:C.legendValue(b)),h.push({code:Object(r["U"])(l),value:b,displayValue:p,label:o.startlabel}),c=0,g=n.length;c<g;c++)i=n[c],d=yt(i.code||i.color),b=p=i.maxvalue,!isNaN(parseInt(b,10))&&(p=(b!==Ct||null!==b)&&(u?b+xt:C.legendValue(b)),h.push({code:Object(r["U"])(d),value:b,displayValue:p,label:i.label||i.displayvalue}));return h[h.length-1].label=o.endlabel||i.label,y},getDefaultConf:function(e){return o[e]}}}();class jt extends s["a"]{constructor(){super(),this.datasource={},this.config.legendItemIds=[]}configure(){let e,t,o,a=this,n=this.getFromEnv("chart"),i="maps"===n.defaultDatasetType,l="TreeMap"===n.getName(),s=this.getFromEnv("dataSource").chart.mapbycategory,c=n.getFromEnv("number-formatter"),d=n.config.showLegend,g=n.getChildren("colorRange")&&n.getChildren("colorRange")[0];n.addToEnv("colorManager",a),a.datasource=n.getFromEnv("dataSource"),e=a.datasource.colorrange,g&&g.remove({instant:!0}),d||(a.config.legendItemIds=[]),t=i?e.gradient&&+e.gradient?"gradient":e.color?"icon":"none":l?"gradient":e.gradient&&"0"!=e.gradient&&!+s?"gradient":"icon","gradient"===t?(kt.init({chart:n}),o=kt.legacyDataParser(e),Object(r["O"])(n,ft,"colorRange",1,[o]),g=n.getChildren("colorRange")[0],n.addToEnv("colorRange",g),o||(g._dontPlot=!0),a.config.legendItemIds=[],a._configureGradientLegend(g)):"icon"===t?(Object(r["O"])(n,ht,"colorRange",1,[{colorRange:e,sortLegend:0,mapByCategory:Object(r["Kb"])(s,0),defaultColor:"cccccc",numberFormatter:c}]),n.addToEnv("colorRange",n.getChildren("colorRange")[0]),d&&a._addLegendItems()):"none"===t&&(n.deleteFromEnv("colorManager"),a.config.legendItemIds=[])}_configureGradientLegend(e){let t=this,o=t.getFromEnv("chart"),a=o.getFromEnv("gLegend");a&&(a.setColorRange(e),t.addExtEventListener("rangeUpdated",function(e,o){t.fireEvent("legendUpdate",{"original-event":e,maxMinArray:o,component:"gradientlegend"})},a))}_addLegendItems(){let e,t,o,a,n,i=this,l=i.config,s=i.getFromEnv("chart"),c=s.getChildren("legend")[0],d=s.getFromEnv("colorRange"),g=d.colorArr,h=g.length;for(a=0;a<h;a++)n={label:Object(r["Ib"])(g[a].label,g[a].displayvalue),datasetObj:g[a],index:a},t=Object(r["jb"])(g[a].code,40),e={FCcolor:{color:g[a].code+","+g[a].code+","+t,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},o=c.getItem(l.legendItemIds[a]),o||(l.legendItemIds.push(c.createItem(i)),o=c.getItem(l.legendItemIds[a]),o.addEventListener("fc-click",o.itemClickFn)),o.removeLegendState("hidden"),g[a].legendItemId=o&&o.getId(),o.configure(n),o.setStateCosmetics("default",{symbol:{fill:Object(r["Vb"])(e),rawFillColor:g[a].code}});for(a=h;a<l.legendItemIds.length;a++)c.disposeItem(l.legendItemIds[a]);l.legendItemIds.splice(h)}legendInteractivity(e){let t=this,o=t.getFromEnv("colorRange").colorArr[e.config.index];t.fireEvent("legendUpdate",{legendItem:e,colorObj:o,component:"legend"})}getColor(e){let t=this,o=t.datasource.colorrange,a=t.datasource.chart.mapbycategory;return!+a&&+o.gradient?{code:t.getColorByValue(e)}:t.getColorObj(e)}getValueRatio(){return this.getFromEnv("colorRange").getValueRatio()}getCumulativeValueRatio(){return this.getFromEnv("colorRange").getCumulativeValueRatio()}getBoxFill(e){return this.getFromEnv("colorRange").getBoxFill(e)}getColorByValue(e){return this.getFromEnv("colorRange").getColorByValue(e)}getColorObj(e){return this.getFromEnv("colorRange").getColorObj(e)}}var Lt=jt;function Ft(e){let t=e.getChildren("colorManager");return e.getFromEnv("dataSource").colorrange?t?(e.addToEnv("colorManager",t[0]),void t[0].configure()):(t=new Lt,e.attachChild(t,"colorManager"),e.addToEnv("colorManager",t),void t.configure()):(t&&(t[0].config.legendItemIds=[]),void e.deleteFromEnv("colorManager"))}var It=function(e){Ft(e)};let St,At,Et,_t={},Pt="rgba(192,192,192,"+(r["zb"]?.002:1e-6)+")",Tt=!1,Mt=!0,Bt="%",Rt=",",Kt="#000000",Dt={}.hasOwnProperty,Gt="M",Vt="L";function Wt(e,t){return function e(t,o){var a,r;for(r in t)Dt.call(t,r)&&(a=t[r],o[r]===St?o[r]=a:"object"==typeof a&&null!==a&&e(a,o[r]))}(e,t),t}function Nt(e){return Object(r["rb"])(e||Kt)||Kt}function Ht(e){return Object(r["jb"])(e,1)}function zt(e){var t,o=e.fontSize+"";return o?(t=o.replace(/(\d+)(px)*/,"$1px"),e.fontSize=t,e):e}function Xt(e){return!(e!==St&&"undefined"!=typeof e&&null!==e&&!isNaN(e))}_t.CAPTION="CAPTION",_t.LEGEND_BODY="LEGEND_BODY",_t.AXIS_LABEL="LEGEND_LABEL",_t.LEGEND_AXIS="LEGEND_AXIS",_t.RANGE="RANGE",_t.AXIS_VALUE="AXIS_VALUE",At=function(){function e(e){var o,a,r,n=t.getFromEnv("number-formatter");for(o=0,a=e.length;o<a;o++)r=e[o].maxvalue,r&&(e[o].maxvalue=n.getCleanValue(r))}var t,o={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return o.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(r["Vb"])({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},o.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:Pt,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:Pt,stroke:"#FFFFFF"}}},o.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(e){t=e.chart},legacyDataParser:function(o,a){var n,i,l,s,c,d,g,h,b,p,u,m,f={},v=t.getFromEnv("number-formatter");if(!o)return!1;for(f.mapByPercent=u=!!Object(r["Kb"])(o.mapbypercent,0),n=o.color||[],o.minvalue===St&&(o.minvalue=a.min===St?0:u?0:a.min),o.maxvalue===St&&(o.maxvalue=a.max===St?100:u?100:a.max),m=!1,c=0,g=n.length;c<g;c++)if(n[c].maxvalue){m=!0;break}for(m||(n=[]),l=o.code,h=f.colorRange=[],f.gradient=!!Object(r["Kb"])(o.gradient,1),n.length?l=Nt(l):(l?(s=Nt(l),l=Nt()):(l=Nt(),s=Ht(l)),n.push({code:s,maxvalue:o.maxvalue,label:St})),e(n),n=n.sort(function(e,t){return e.maxvalue-t.maxvalue}),b=p=o.minvalue&&v.getCleanValue(o.minvalue),p=(b!==St||null!==b)&&(u?b+Bt:v.legendValue(b)),h.push({code:Object(r["U"])(l),value:b,displayValue:p,label:o.startlabel}),c=0,g=n.length;c<g;c++)i=n[c],d=Nt(i.code||i.color),b=p=i.maxvalue,!isNaN(parseInt(b,10))&&(p=(b!==St||null!==b)&&(u?b+Bt:v.legendValue(b)),h.push({code:Object(r["U"])(d),value:b,displayValue:p,label:i.label||i.displayvalue}));return h[h.length-1].label=o.endlabel||i.label,f},getDefaultConf:function(e){return o[e]}}}();class Yt extends s["a"]{getType(){return"gradientLegend"}getName(){return"gLegend"}constructor(){super(),Et=this,this.enabled=!1,this.drawOptions={},this.components={}}setColorRange(e){let t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)}configureAttributes(){var e,t,o,a,n,i,l,s,c,d,g=this,h=g.getFromEnv("chart"),b=g.getFromEnv("dataSource").chart,p=g.conf={},u=b.outcnvbasefont,m=b.outcnvbasefontsize,f=b.outcnvbasefontcolor,v=h.config.dataLabelStyle;At.init({chart:h}),g.data=g.getFromEnv("dataSource").colorrange,g._dontPlot||(g.drawOptions={smartLabel:g.getFromEnv("smartLabel"),gLegend:g},g._dontPlot=!1,g._recalculateLogicalSpace=!0,p.caption=Object(r["Ib"])(b.legendcaption),p.legendPosition=Object(r["Ib"])(b.legendposition,"bottom").toLowerCase(),p.showLegend=Object(r["Kb"])(b.showlegend,1),p.interactiveLegend=Object(r["Kb"])(b.interactivelegend,1),p.showLegendLabels=Object(r["Kb"])(b.showlegendlabels,1),e=b.legenditemfontcolor||f,t=b.legenditemfont||u,o=b.legenditemfontsize||m,a=Object(r["Kb"])(b.legenditemfontbold,0),n=b.legendcaptionfontcolor||f,i=b.legendcaptionfont||u,l=b.legendcaptionfontsize||m,s=Object(r["Kb"])(b.legendcaptionfontbold,1),c=b.legendaxisbordercolor?Object(r["vb"])(Object(r["U"])(b.legendaxisbordercolor)):St,d=c?Object(r["Kb"])(b.legendaxisborderalpha,100)/100:St,p.axisTextItemConf={style:{fill:e?Object(r["P"])(Object(r["Ib"])(e)):v.color,fontFamily:t?Object(r["Ib"])(t):v.fontFamily,fontSize:o?Object(r["Kb"])(o):v.fontSize.match(/\d+/)[0],fontWeight:a?"bold":v.fontWeight}},p.legendCaptionConf={style:{fill:n?Object(r["P"])(Object(r["Ib"])(n)):v.color,fontFamily:i?Object(r["Ib"])(i):v.fontFamily,fontSize:l?Object(r["Kb"])(l):v.fontSize.match(/\d+/)[0],fontWeight:s?"bold":v.fontWeight,fontStyle:"normal"}},p.legendAxisConf={legendAxisHeight:11,style:{stroke:c,"stroke-opacity":d},line:{style:{stroke:Object(r["P"])(Object(r["Ib"])(b.legendscalelinecolor,"FFF8E9"),Object(r["Kb"])(b.legendscalelinealpha,100)),"stroke-width":Object(r["Kb"])(b.legendscalelinethickness)}}},p.sliderGroupConf={showTooltip:Object(r["Kb"])(b.showtooltip,1),outerCircle:{rFactor:Object(r["Kb"])(b.sliderdiameterfactor),style:{stroke:Object(r["P"])(Object(r["Ib"])(b.legendpointerbordercolor,"757575"),Object(r["Kb"])(b.legendpointerborderalpha,100))}},innerCircle:{rFactor:Object(r["Kb"])(b.sliderholediameterfactor),style:{stroke:Object(r["P"])(Object(r["Ib"])(b.legendpointercolor,"FFFFFF"),Object(r["Kb"])(b.legendpointeralpha,100))}}},p.legendCarpetConf={spreadFactor:Object(r["Kb"])(b.legendspreadfactor),allowDrag:!!Object(r["Kb"])(b.legendallowdrag,0),captionAlignment:Object(r["Ib"])(b.legendcaptionalignment,"center"),style:{fill:Object(r["P"])(Object(r["Ib"])(b.legendbgcolor,"e4d9c1"),Object(r["Kb"])(b.legendbgalpha,100)),stroke:Object(r["P"])(Object(r["Ib"])(b.legendbordercolor,"c4b89d"),Object(r["Kb"])(b.legendborderalpha,100)),"stroke-width":Object(r["Kb"])(b.legendborderthickness,1)}})}postConfigureInit(){var e,t,o,a,r,n,i,l,s,c,d,g,h=this,b=h.conf;h.elem={},b.interactiveLegend?(r=Wt(At.getDefaultConf("sliderGroupConf"),b.sliderGroupConf),this.sGroup?(a=h.elem.sGroup=this.sGroup,a.configure(r),h.elem.sGroup.gLegend=h):(this.sGroup=h.elem.sGroup=a=new to(r),a.configure(r),h.elem.sGroup.gLegend=h)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),r=Wt(At.getDefaultConf("legendCarpetConf"),b.legendCarpetConf),r.legendPosition=b.legendPosition,g=At.getDefaultConf("legendBodyConf"),"bottom"===b.legendPosition?(h.drawOptions.refSideKey="canvasWidth",h.drawOptions.refOffsetKey="canvasLeft",n=Wt(At.getDefaultConf("axisTextItemConf"),b.axisTextItemConf),g.legendPosition="bottom",d=Wt(At.getDefaultConf("legendAxisConf"),b.legendAxisConf),d.legendPosition="bottom",n.legendPosition="bottom"):(h.drawOptions.refSideKey="canvasHeight",h.drawOptions.refOffsetKey="canvasTop",n=Wt(At.getDefaultConf("axisTextItemConf"),b.axisTextItemConf),g.legendPosition="right",d=Wt(At.getDefaultConf("legendAxisConf"),b.legendAxisConf),d.legendPosition="right",n.legendPosition="right"),Object.keys(this.components).length||(this.components.LegendCarpet=new Jt,this.components.LegendBody=new $t,this.components.LegendAxis=new Qt,this.components.LegendValues=new oo,b.showLegendLabels&&(this.components.LegendLabels=new qt)),o=this.components.LegendAxis,s=this.components.LegendValues,t=this.components.LegendCarpet,i=this.components.LegendBody,b.showLegendLabels&&(l=this.components.LegendLabels),this.components.LegendCarpet.configure(r),this.components.LegendValues.configure(n),this.components.LegendAxis.configure(d),this.components.LegendBody.configure(h.drawOptions.colorRange,g,n),b.showLegendLabels&&l.configure(n),b.caption?(c=Wt(At.getDefaultConf("legendCaptionConf"),b.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(b.caption,c):(e=this.componentCaption=new Zt,e.configure(b.caption,c)),t.addCompositions(this.componentCaption,_t.CAPTION)):(t.removeCompositions(_t.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),a&&o.addCompositions(a,_t.RANGE),l&&i.addCompositions(l,_t.AXIS_LABEL),i.addCompositions(o,_t.LEGEND_AXIS),i.addCompositions(s,_t.AXIS_VALUE),t.addCompositions(i,_t.LEGEND_BODY),h.elem.gl=new Ut(t)}getValueRange(){var e,t,o=this,a=o.elem&&o.elem.sGroup,r=a.sliders,n=a.extremes;return e=r["false"].currPos,t=n[1]-n[0]+r["true"].currPos,[{min:a.getValueFormPixel(e),max:a.getValueFormPixel(t)}]}_dispose(){var e=this;e.elem&&e.elem.gl&&e.elem.gl.dispose(),e.elem={},super._dispose()}getCalculatedLogicalSpace(){return this._logicalArea}setCalculatedLogicalSpace(e){this._logicalArea=e}getLogicalSpace(e){var t,o,a,r=this,n=r.conf,i={height:0,width:0},l=r.drawOptions,s=r.getFromEnv("chartConfig");return r._recalculateLogicalSpace?r._dontPlot?i:(r._recalculateLogicalSpace=!1,r.postConfigureInit(),n.showLegend?(o=l.refSideKey,a=l.refOffsetKey,r.drawOptions.refSide=s[o],r.drawOptions.refOffset=s[a],r.drawOptions.maxOtherSide=e||r.drawOptions.maxOtherSide,r.elem.gl&&(t=r.elem.gl.getLogicalSpace(r.drawOptions,!0),r.elem.gl&&r.setCalculatedLogicalSpace(t)),r.getCalculatedLogicalSpace()):i):(o=l.refSideKey,a=l.refOffsetKey,r.drawOptions.refSide=s[o],r.drawOptions.refOffset=s[a],r.drawOptions.maxOtherSide=e||r.drawOptions.maxOtherSide,t=r.elem.gl.getLogicalSpace(r.drawOptions,!0),r.setCalculatedLogicalSpace(t),r.getCalculatedLogicalSpace()||i)}resetLegend(){var e,t=this;e=t.elem&&t.elem.sGroup,e&&e.reset()}allocatePosition(){var e,t,o,a,r,n,i=this.getFromEnv("chart"),l=i.config,s=this,c=s.conf||{},d=c.legendPosition,g=l.canvasLeft,h=l.canvasTop,b=l.canvasWidth,p=l.canvasHeight,u=l.marginBottom,m=l.marginRight;i.config.gLegendEnabled&&(e=this.getCalculatedLogicalSpace(),o=c.width=e.width,a=c.height=e.height,"bottom"===d?(t=b-o,r=g+(0>t?0:t/2),n=l.height-e.height-u-(l.actionBarHeight||0)):(t=p-a,n=h+(0>t?0:t/2),r=l.width-e.width-m),c.xPos=r,c.yPos=n)}draw(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,o=this,a=o.conf||{},r=e.hasGradientLegend;!e.config.gLegendEnabled||t&&r&&o.drawLegendComponent(a.xPos,a.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})}drawLegendComponent(e,t,o){var a,r,n=this,i=n.conf;return n._dontPlot?void 0:i.showLegend?(n.drawOptions.animationManager=o.animationManager,n.drawOptions.parentGroup=o.parentGroup,n.drawOptions.x=e,n.drawOptions.y=t,n.drawOptions.maxOtherSide=n.drawOptions.maxOtherSide||o.maxOtherSide,r=n.elem.gl.draw(n.drawOptions),a=r.getBBox(),i.xPos=a.x,i.yPos=a.y,i.height=a.height,i.width=a.width,void(n.enabled=!0)):void(n.enabled=!1)}}class Ut{constructor(e){this.carpet=e}draw(e){return this.carpet.draw(e)}getLogicalSpace(e,t){return this.carpet.getLogicalSpace(e,t)}dispose(){this.carpet&&this.carpet.group&&this.carpet.group.remove()}}class Jt{constructor(e){this.conf=e,this._id="GL_CARPET",this.compositionsByCategory={},this.node=St,this.group=St,this._lSpace=St,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}configure(e){this.conf=e}getName(){return"LegendCarpet"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}removeCompositions(e){delete this.compositionsByCategory[e]}getBoundingBox(e){var t,o,a=this.conf,r=a.spreadFactor,n=e.refSide,i=e.alignment,l=e.refOffset,s=e.x,c=e.y;return"bottom"===this.conf.legendPosition?(t=a.width=n*r,o=e.maxOtherSide,i&&(s===St||null===s)&&(s=(l+n)/2-t/2)):(o=a.height=n*r,t=e.maxOtherSide,i&&(c===St||null===c)&&(c=(l+n)/2-o/2)),{width:t,height:o,x:s,y:c}}getPostCalcDecisionsH(e,t){var o,a=this.conf,r=a.padding,n=0;for(o in this.moveInstructions={},t)n+=t[o].height||0;e.height=n+2*r.v}getLogicalSpace(e,t){var o,a,r,n,i,l=this._lSpace,s=["CAPTION","LEGEND_BODY"],c=this.conf,d=c.padding,g=this.compositionsByCategory,h=0,b={},p=0;if(l&&!t)return l.isImpure=!0,l;l=this._lSpace=a=this.getBoundingBox(e),(Xt(l.x)||Xt(l.y)||Xt(l.height)||Xt(l.width))&&(this.autoRecalculate=!0),r=Wt(a,{}),r.height-=2*d.v,r.width-=2*d.h,r.x+=d.h,r.y+=d.v;for(let u=0;u<s.length;u++)o=g[s[u]],o&&(i=Wt(r,{}),i.y+=h,h=r.height*o.conf.spreadFactor,i.height=h+p,n=o.getLogicalSpace(Wt(i,{}),e,t),p=i.height-n.height,b[s[u]]=n,h=n.height);return this.getPostCalcDecisions(a,b),this._lSpace=a,a}setupDragging(){var e=this.group,t=0,o=0,a=0,n=0;e.css({cursor:"move"}),e.drag(function(r,i){t=r,o=i,e.attr({transform:"t"+(a+t)+","+(n+o)})},function(){a+=t,n+=o},r["Tb"])}draw(e){var t,o,a,r,n=this.conf,i=this,l=["CAPTION","LEGEND_BODY"],s=this.compositionsByCategory,c=e.animationManager,d=e.parentGroup;this.getLogicalSpace(e,this.autoRecalculate),r=this._lSpace,this.group=t=c.setAnimation({el:this.group||"group",attr:{name:i.groupName},component:Et,container:d,label:"carpetGroup"}),this.node=c.setAnimation({el:this.node||"rect",attr:r,css:n.style,component:Et,container:t,label:"rect"});for(let g=0;g<l.length;g++)a=s[l[g]],a&&a.draw(n.captionAlignment,r,{animationManager:c,colorRange:e.colorRange,numberFormatter:e.numberFormatter,parentLayer:t,smartLabel:e.smartLabel,moveInstructions:this.moveInstructions[o],gLegend:e.gLegend});return n.allowDrag&&this.setupDragging(),this.node}getPostCalcDecisions(e,t){return"bottom"===this.conf.legendPosition?this.getPostCalcDecisionsH(e,t):this.getPostCalcDecisionsV(e,t)}getPostCalcDecisionsV(e,t){var o,a,r,n=this.conf,i=n.padding,l=Number.NEGATIVE_INFINITY,s=this.moveInstructions;for(a in this.getPostCalcDecisionsH(e,t),t)o=t[a].width,l=l<o?o:l;for(a in e.width=l+2*i.h,t)o=t[a].width,r=l-o,r&&(s[a]="t"+r/2+",0")}}class Zt{constructor(e,t){this.rawText=e,this.conf=t,this._id="GL_CAPTION",this.node=St,this.bound=St,this._lSpace=St,this.LegendCaption={},this.LegendCaption.LEFT={x:function(e,t){return t.x+e.width/2+2}},this.LegendCaption.RIGHT={x:function(e,t){return t.x+t.width-e.width/2-2}},this.LegendCaption.CENTER={x:function(){let e=arguments[1];return e.x+e.width/2}}}configure(e,t){this.rawText=e,this.conf=t}getName(){return"LegendCaption"}getType(){return"caption"}getLogicalSpace(e,t,o){var a,r,n,i,l=this.conf,s=l.padding,c=this._lSpace,d=this.rawText,g=t.gLegend.getFromEnv("chartConfig");return c&&!o?(c.isImpure=!0,c):(c=this._lSpace={bound:{height:0,width:0},node:{logicArea:St,smartText:St}},a=t.smartLabel,d?(r=Wt(e,{}),r.height-=2*s.v,r.width-=2*s.h,r.x+=s.h,r.y+=s.v,a.useEllipsesOnOverflow(g.useEllipsesWhenOverflow),i=Wt(this.conf.style,{}),zt(i),a.setStyle(this._metaStyle=i),n=a.getSmartText(d,r.width,r.height),r.height=n.height,r.width=n.width,e.height=n.height+2*s.v,e.width=n.width+2*s.h,c.node.smartText=n,c.node.logicArea=r,c.bound=e,e):c.bound)}draw(){var e,t,o,a,r,n,i,l,s,c,d,g=this.conf,h=g.bound||{};return 3<=arguments.length?(i=arguments[0],l=arguments[1],s=arguments[2]):2<=arguments.length&&(i=arguments[0],s=arguments[1]),e=s.parentLayer,d=s.animationManager,this.group=t=d.setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:g.style,component:Et,container:e}),this.getLogicalSpace(l,s),r=this._lSpace,c=r.node,a=r.bound,this.bound=o=d.setAnimation({el:this.bound||"rect",attr:a,css:h.style,container:t,component:Et}),n="string"==typeof i?this.LegendCaption[i.toUpperCase()].x(c.smartText,l||c.logicArea):i,this.node=d.setAnimation({el:this.node||"text",attr:{text:c.smartText.text,x:n,y:c.logicArea.y+c.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:g.style.fill},container:t,component:Et}),{group:t,bound:o,node:this.node}}dispose(){this.group.remove(),this.bound.remove(),this.node.remove()}}class $t{constructor(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this._id="GL_BODY",this.bound=St,this.group=St,this.compositionsByCategory={},this._lSpace=St,this.SC_STACK=[_t.AXIS_LABEL,_t.LEGEND_AXIS,_t.AXIS_VALUE],this.DARW_STACK=[_t.AXIS_VALUE,_t.LEGEND_AXIS,_t.AXIS_LABEL]}configure(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this.compositionsByCategory={}}getName(){return"LegendBody"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}getSpaceTaken(e){return"bottom"===this.conf.legendPosition?e.height:e.width}getLogicalSpace(e,t,o){var a,r,n,i,l,s,c,d=this._lSpace,g=this.conf,h=g.padding,b=this.compositionsByCategory,p=0;if(d&&!o)return d.isImpure=!0,d;for(d=this._lSpace={bound:{height:0,width:0},node:{logicArea:St}},i=Wt(e,{}),i.height-=2*h.v,i.width-=2*h.h,i.x+=h.h,i.y+=h.v,l=this.getCompositionPlotAreaFor(i),t.colorRange=this.colorRange,s=0,c=this.SC_STACK.length;s<c;s++)(a=b[this.SC_STACK[s]])&&(r=l(n,a.conf.spreadFactor),n=a.getLogicalSpace(Wt(r,{}),t,o),p+=this.getSpaceTaken(n));return this.updateEffectivePlotArea(e,i,p),d.node.logicArea=i,d.bound=e,e}draw(){var e,t,o,a,r,n,i,l,s,c,d=this.childTextConf,g=this.conf,h=g.bound.style||{},b=this.compositionsByCategory;for(3<=arguments.length?(n=arguments[1],l=arguments[2]):2<=arguments.length&&(l=arguments[1]),t=l.parentLayer,e=l.animationManager,this.getLogicalSpace(n,l),i=this._lSpace,this.group=r=e.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:d.style,container:t,component:Et}),this.bound=o=e.setAnimation({el:this.bound||"rect",attr:i.bound,css:h,container:r,component:Et}),l.colorRange=this.colorRange,l.parentLayer=r,s=0,c=this.DARW_STACK.length;s<c;s++)(a=b[this.DARW_STACK[s]])&&a.draw(l);return l.moveInstructions&&r.attr({transform:l.moveInstructions}),{bound:o,group:r}}getCompositionPlotAreaFor(e){var t,o="bottom"===this.conf.legendPosition;return t=Wt(e,{}),function(a,r){return a=a||{},o?(t.y+=a.height||0,t.height=e.height*r):(t.x+=a.width||0,t.width=e.width*r),t}}updateEffectivePlotArea(e,t,o){var a=this.conf,r=a.padding;"bottom"===this.conf.legendPosition?(t.height=o,e.height=o+2*r.v):(t.width=o,e.width=o+2*r.h)}}class qt{constructor(e){this.conf=e,this.node=[],this._id="GL_LABELS"}configure(e){this.conf=e}getType(){return"label"}getName(){return"LegendLabel"}getEffectivePlotArea(e){var t=this.conf,o=t.padding;return e.height-=2*o.v,e.width-=2*o.h,e.x+=o.h,e.y+=o.v,e}getLogicalSpace(e,t,o){var a,r,n,i,l,s,c,d,g,h,b,p,u,m,f,v,y,C,O,x,w,k,j,L=Math.max,F="bottom"===this.conf.legendPosition,I=this._lSpace,S=this.conf,A=S.padding,E=[],_=t.gLegend.getFromEnv("chartConfig"),P=[];if(I&&!o)return I.isImpure=!0,I;for(a=t.colorRange,r=t.smartLabel,h=a.getCumulativeValueRatio(),n=a.colorRange,I=this._lSpace={bound:{height:0,width:0},node:{logicArea:St,smartTexts:[]}},u=I.node.smartTexts,d=Wt(e,{}),f=this.getEffectivePlotArea(d),j=F?f.width:f.height,r.useEllipsesOnOverflow(_.useEllipsesWhenOverflow),k=Wt(S.style,{}),zt(this._metaStyle=k),r.setStyle(k),v=r.getSmartText("W"),i=0,l=n.length;i<l;i++)g=n[i].label,g?P.push({oriIndex:i,label:g}):u[i]=St;if(l=P.length,0===l)return{height:0,width:0};for(b=1<l?(h[P[l-1].oriIndex]-h[P[0].oriIndex])/2*j/100:L(h[P[0].oriIndex],100-h[P[0].oriIndex])/2*j/100,p=b,F?(x=r.getSmartText(P[0].label,p,f.height),x.x=h[P[0].oriIndex]*f.width/100,s=x.x+x.width):(x=r.getSmartText(P[0].label,p,f.width),x.y=h[P[0].oriIndex]*f.height/100,s=x.y+x.width),E.push(x.height),u[P[0].oriIndex]=x,F?(x=r.getSmartText(P[l-1].label,p,f.height),x.x=h[P[l-1].oriIndex]*f.width/100,c=x.x-x.width):(x=r.getSmartText(P[l-1].label,p,f.width),x.y=h[P[l-1].oriIndex]*f.height/100,c=x.y-x.width),E.push(x.height),u[P[l-1].oriIndex]=x,O=s,i=1;i<l-1;i++)g=P[i].label,w=P[i].oriIndex,x=St,y=i+1===l-1?c:h[P[i+1].oriIndex]*j/100,C=h[P[i].oriIndex]*j/100,b=Math.min(C-O,y-C),b>2*v.width&&(F?(x=r.getSmartText(g,b,f.height),x.x=h[w]*f.width/100):(x=r.getSmartText(g,b,f.width),x.y=h[w]*f.height/100),O=b,E.push(x.height)),u[P[i].oriIndex]=x;return m=L.apply(Math,E),F?(f.height=m,e.height=m+2*A.v):(f.width=m,e.width=m+2*A.v),I.node.logicArea=f,I.bound=e,e}draw(){var e,t,o,a,r,n,i,l,s,c,d,g,h="bottom"===this.conf.legendPosition,b=this.conf,p=b.bound&&b.bound.style||{stroke:"none"},u={};2<=arguments.length&&arguments[1]?(a=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),g=i.animationManager,e=i.parentLayer,this.getLogicalSpace(a,i),n=this._lSpace,s=n.node.logicArea,c=n.node.smartTexts,this.group=o=g.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:Et}),this.bound=t=g.setAnimation({el:this.bound||"rect",attr:n.bound,css:p,container:o,component:Et});for(let m=0;m<this.node.length;m++)this.node[m].remove();for(this.node=[],l=0,d=c.length;l<d;l++)r=c[l],r&&(h?(u.y=s.y+r.height/2,u.x=l===d-1?s.x+r.x-r.width/2:l?s.x+r.x:s.x+r.x+r.width/2):(u.x=s.x+r.height/2,u.y=l===d-1?s.y+r.y-r.width/2:l?s.y+r.y:s.y+r.y+r.width/2),this.node.push(g.setAnimation({el:"text",attr:{text:r.text,x:u.x,y:u.y,lineHeight:this._metaStyle.lineHeight,fill:b.style.fill,transform:h?"R0":"R270,"+u.x+","+u.y},container:o,component:Et})));return{group:o,bound:t,node:this.node}}}class Qt{constructor(e){this.conf=e,this._id="FL_AXIS",this.node=St,this.group=St,this.shadow=St,this.markerLine=St,this.compositionsByCategory={}}configure(e){this.conf=e}getName(){return"LegendAxis"}getType(){return"axis"}addCompositions(e,t){this.compositionsByCategory[t]=e}getLogicalSpace(){var e,t,o,a,r,n,i,l="bottom"===this.conf.legendPosition,s=arguments[0],c=arguments[2],d=this._lSpace,g=this.conf,h=g.padding,b=g.legendAxisHeight,p=this.compositionsByCategory,u=0;return d&&!c?(d.isImpure=!0,d):(d=this._lSpace={bound:{height:0,width:0},node:{logicArea:St}},r=Wt(s,{}),r.height-=2*h.v,r.width-=2*h.h,r.x+=h.h,r.y+=h.v,e=b/2+g.line.offset,t=b/2,a=p[_t.RANGE],a&&(n=a.sliders["false"],i=n.conf.outerCircle.rFactor*b,t+=u=Math.max(i/2-b/2,0)),l?(r.y+=u,r.height=o=t+e+u,s.height=o+2*h.v):(r.x+=u,r.width=o=t+e+u,s.width=o+2*h.v),d.node.logicArea=r,d.bound=s,s)}getDrawableAxisArea(e){var t=this.conf,o="bottom"===this.conf.legendPosition,a=e.x,r=e.y,n=o?e.width:t.legendAxisHeight,i=o?t.legendAxisHeight:e.height,l=t.legendAxisHeight/2;return{x:a,y:r,width:n,height:i,r:l}}preDrawingRangeParamV(e){var t=e.x+e.width/2,o=e.width;return{x:t,calculationBase:o,rangeStart:e.y,rangeEnd:e.y+e.height,prop:"x"}}preDrawingRangeParamH(e){var t=e.y+e.height/2,o=e.height;return{y:t,calculationBase:o,rangeStart:e.x,rangeEnd:e.x+e.width,prop:"y"}}preDrawingRangeParam(e){return"bottom"===this.conf.legendPosition?this.preDrawingRangeParamH(e):this.preDrawingRangeParamV(e)}getScaleMarkerPathStrH(e,t){var o,a,r,n,i,l=Wt(e,{}),s=this.conf,c=s.line,d="",g="";for(l.x+=l.r,l.width-=2*l.r,i=l.y+l.height,o=0,a=t.length;o<a;o++)r=t[o],n=l.x+r*l.width/100,d+=Gt+n+Rt+(i-c.grooveLength)+Vt+n+Rt+(i+c.offset);return g+=Gt+l.x+Rt+(i+c.offset)+Vt+(l.x+l.width)+Rt+(i+c.offset),d+g}getColorGradientH(e){return{axis:e.getBoxFill(),shadow:Object(r["Vb"])({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}draw(){var e,t,o,a,r,n,i,l,s,c,d,g,h,b,p=this.conf,u=p.bound||{},m=p.line,f=u.style||{},v=this.compositionsByCategory;for(o in 2<=arguments.length?(t=arguments[0],g=arguments[1]):1<=arguments.length&&(g=arguments[0]),h=g.animationManager,e=g.parentLayer,a=g.colorRange,r=a.getCumulativeValueRatio(),this.getLogicalSpace(t,g),d=this._lSpace,this.group=i=h.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:e,component:Et}),this.bound=h.setAnimation({el:this.bound||"rect",attr:d.bound,css:f,component:Et,container:i}),c=this.getDrawableAxisArea(d.node.logicArea),s=this.getColorGradient(a),p.style.fill=s.axis,p.shadow.style.fill=s.shadow,this.node=h.setAnimation({el:this.node||"rect",attr:c,css:p.style,container:i,component:Et}),this.shadow=h.setAnimation({el:this.shadow||"rect",attr:c,css:p.shadow.style,container:i,component:Et}),b=this.getScaleMarkerPathStr(c,r),this.path=h.setAnimation({el:this.path||"path",attr:{path:b},css:m.style,container:i,component:Et}),v)n=v[o],o===_t.RANGE&&(l=this.preDrawingRangeParam(c),g[l.prop]=l[l.prop],g.key=l.prop,g.rCalcBase=l.calculationBase,g.parentLayer=i,n.draw(l.rangeStart,l.rangeEnd,g))}getScaleMarkerPathStr(e,t){return"bottom"===this.conf.legendPosition?this.getScaleMarkerPathStrH(e,t):this.getScaleMarkerPathStrV(e,t)}getColorGradient(e){return"bottom"===this.conf.legendPosition?this.getColorGradientH(e):this.getColorGradientV(e)}getScaleMarkerPathStrV(e,t){var o,a,r,n,i,l=Wt(e,{}),s=this.conf,c=s.line,d="",g="";for(l.y+=l.r,l.height-=2*l.r,n=l.x+l.width,o=0,r=t.length;o<r;o++)a=t[o],i=l.y+a*l.height/100,d+=Gt+(n-c.grooveLength)+Rt+i+Vt+(n+c.offset)+Rt+i;return g+=Gt+(n+c.offset)+Rt+l.y+Vt+(n+c.offset)+Rt+(l.y+l.height),d+g}getColorGradientV(e){return{axis:e.getBoxFill(!0),shadow:Object(r["Vb"])({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}}class eo{constructor(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.node=St,this.tracker=St,this.currPos=0,this.swing=[]}configure(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.currPos=0,this.swing=[]}getType(){return"slider"}getName(){return"Slider"}updateSwingRange(e,t){this.swing[+e]=t}draw(e,t,o,a){var r,n,i,l,s,c,d,g=Math.ceil,h=a.parentLayer,b=this,p=a.animationManager,u=this.conf,m=u.outerCircle,f=u.innerCircle,v=p.getFromEnv("chart").config,y=g(m.rFactor*a.rCalcBase/2),C=g(f.rFactor*a.rCalcBase/2),O="L"-C,x=a.gLegend.getFromEnv("toolTipController"),w=this.sliderIndex;return u.outerRadius=y,u.innerRadius=C,this._scaleVal=t,f.style["stroke-width"]=O,l=g(m.style["stroke-width"]/2),C+=l,n=this.node=p.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:h,component:Et}),"x"===a.key?(s=o,c=e,c+=w?-C:+C):(s=e,c=o,s+=w?-C:+C),this.oCircle=p.setAnimation({el:this.oCircle||"circle",attr:{cx:s,cy:c,r:y},css:m.style,container:n,component:Et}),this.iCircle=p.setAnimation({el:this.iCircle||"circle",attr:{cx:s,cy:c,r:C},css:f.style,container:n,component:Et}),d=this.tracker=p.setAnimation({el:this.tracker||"circle",attr:{cx:s,cy:c,r:y+5,fill:Pt,stroke:Pt,cursor:"pointer"},container:n,component:Et}),n.attr({transform:"x"===a.key?"t0,"+b.currPos:"t"+b.currPos+",0"}),r=v.showToolTip?t:"",x.enableToolTip(d,r),this._dragAPI=i=this.getDragAPI("x"===a.key),d.undrag(),d.drag(i.dragging,i.dragStart,i.dragEnd),{translateAscending:y+l}}getDragAPI(e){var t,o,a,r,n=this,i=n.node,l=n.sliderIndex,s=n.rangeGroup,c=n.conf.innerRadius,d=c;return{dragging:function(c){var g,h,b,p,u;return c.stopPropagation(),b=e?c.data[1]:c.data[0],l?(g=t[0]-t[1]+d,h=0):(g=0,h=t[1]-t[0]-d),u=n.currPos+b,u<g?b+=g-u:u>h&&(b-=u-h),i.attr({transform:e?"t0,"+(n.currPos+b):"t"+(n.currPos+b)+",0"}),o=b,a&&clearTimeout(a),a=setTimeout(function(){s.updateWhenInRest(n,n.currPos+b)},100),p=s.updateWhenInMove(n,n.currPos+b),n.conf.showTooltip&&n.tracker.data("__FC_tooltipText",p),r=!0,!0},dragStart:function(e){e.stopPropagation(),t=n.swing,r=!1,s.dragStarted(n)},dragEnd:function(){var e;s.dragCompleted(n,r,n.currPos+o),r&&(a&&clearTimeout(a),a=setTimeout(function(){s.updateWhenInRest(n,n.currPos)},100),n.currPos+=o,e=t[+l]+n.currPos,s.updateRange(n,e))}}}dispose(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove()}}class to{constructor(e){var t={};this._id="GL_SG1",this.conf=e,t.conf=e,this.extremes=[],this.sliders={},this.min=void 0,this.max=void 0,t.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[Tt]=new eo(Tt,t,this._id+"_0"),this.sliders[Mt]=new eo(Mt,t,this._id+"_1")}configure(e){var t={};this.min=void 0,this.max=void 0,this.conf=e,t.conf=e,t.sliderGroup=this,this.sliders[Tt].configure(Tt,t,this._id+"_0"),this.sliders[Mt].configure(Mt,t,this._id+"_1")}getType(){return"slider"}getName(){return"SliderGroup"}initRange(e,t){var o=e.sliderIndex;this.extremes[+o]=t}updateRange(e,t){var o=e.sliderIndex,a=this.sliders,r=a[!o];r.updateSwingRange(o,t)}reset(){var e={};e.conf=this.conf,e.sliderGroup=this,this.min=void 0,this.max=void 0,this.sliders[Tt].configure(Tt,e,this._id+"_0"),this.sliders[Mt].configure(Mt,e,this._id+"_1"),this.draw.apply(this,this._drawParams)}draw(e,t,o){var a,r,n,i,l,s,c=Math.ceil,d=this.sliders,g=d[!1],h=d[!0],b=o.colorRange,p=b.colorRange,u=b.data.mapByPercent,m=o.gLegend.getFromEnv("number-formatter");return this._fcChart=o.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(e,t,o,a){this.getValueFormPixel=function(r){return e+(t-e)/(a-o)*r}},this.updateWhenInMove=function(e,t){this.updateWhenInMove=function(o,a){var r,n,i=this.extremes,l=o.sliderIndex;return r=l?i[1]-i[0]+a:a,n=this.getValueFormPixel(r),n=t?parseFloat(n).toFixed(2)+Bt:e.legendValue(n),n}},this._drawParams=[e,t,o],this.updateWhenInMove(m,u),n=g.conf.outerCircle,r=g.conf.innerCircle,i=c(r.rFactor*o.rCalcBase/2),i+=c(n.style["stroke-width"]/2),this.extremes[0]=e+i,this.extremes[1]=t-i,l=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:p[0].value,this.max=this.max?this.max:p[p.length-1].value,s=p[p.length-1].value-p[0].value,g.currPos=l*(this.min-p[0].value)/s,h.currPos=l*(this.max-p[0].value)/s-l,a=g.draw(e,u?m.legendPercentValue(this.min):m.legendValue(this.min),o[o.key],o),a=h.draw(t,u?m.legendPercentValue(this.max):m.legendValue(this.max),o[o.key],o),g.swing=this.extremes.slice(0),h.swing=this.extremes.slice(0),g.swing[1]+=h.currPos,h.swing[0]+=g.currPos,this.getValueFormPixel(p[0].value,p[p.length-1].value,this.extremes[0],this.extremes[1]),a}updateWhenInRest(e,t){var o,a,r=this.sliders,n=this.extremes,i=e.sliderIndex;i?(o=r[!i].currPos,a=n[1]-n[0]+t):(o=t,a=n[1]-n[0]+r[!i].currPos),this.min=+this.getValueFormPixel(o).toFixed(2),this.max=+this.getValueFormPixel(a).toFixed(2),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])}dragStarted(e){var t=this.sliders,o=this.extremes,a=e.conf,r=this._fcChart;r.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+e.sliderIndex,pointers:[{value:this.getValueFormPixel(t["false"].currPos)},{value:this.getValueFormPixel(o[1]-o[0]+t["true"].currPos)}],legendPointerHeight:a.outerRadius,legendPointerWidth:a.innerRadius,outerRadius:a.outerRadius,innerRadius:a.innerRadius},[r.id])}dragCompleted(e,t,o){var a,r,n=this.sliders,i=this.extremes,l=e.conf,s=this.getValueFormPixel(n["false"].currPos),c=this.getValueFormPixel(i[1]-i[0]+n["true"].currPos),d=this._fcChart;e.sliderIndex?(a=s,r=this.getValueFormPixel(i[1]-i[0]+o)):(a=this.getValueFormPixel(o),r=c),t&&d.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:s,previousMaxValue:c,minValue:a,maxValue:r},[d.id]),d.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+e.sliderIndex,pointers:[{value:a},{value:r}],legendPointerHeight:l.outerRadius,legendPointerWidth:l.innerRadius,outerRadius:l.outerRadius,innerRadius:l.innerRadius},[d.id])}dispose(){this.sliders[Tt].dispose(),this.sliders[Mt].dispose()}}class oo extends qt{constructor(){super(arguments[0]),this._id="GL_VALUES",this.node=[]}configure(e){this.conf=e}getName(){return"LegendValues"}getType(){return"legend"}getLogicalSpace(e,t,o){var a,r,n,i,l,s,c,d,g,h,b,p,u,m,f,v,y,C,O,x,w,k,j,L,F,I=Math.min,S=Math.max,A="bottom"===this.conf.legendPosition,E=this._lSpace,_=this.conf,P=_.padding,T=t.gLegend.getFromEnv("chartConfig"),M=[],B=[];if(E&&!o)return E.isImpure=!0,E;for(a=t.colorRange,r=t.smartLabel,n=a.colorRange,c=a.getCumulativeValueRatio(),E=this._lSpace={bound:{height:0,width:0},node:{logicArea:St,smartTexts:[]}},F=E.node.smartTexts,x=Wt(e,{}),x.height-=2*P.v,x.width-=2*P.h,x.x+=P.h,x.y+=P.v,r.useEllipsesOnOverflow(T.useEllipsesWhenOverflow),L=Wt(_.style,{}),zt(this._metaStyle=L),r.setStyle(L),j=r.getSmartText("W"),s=n.length,A?(b=d=(c[s-1]-c[0])/2*x.width/100,k=n[0].displayValue,i=r.getSmartText("string"!=typeof k&&k!==St&&k.toString()||k,b,x.height),i.x=c[0]*x.width/100,p=i.x+i.width,M.push(i.height)):(b=d=(c[s-1]-c[0])/2*x.height/100,i=r.getSmartText(n[0].displayValue,x.width,b),i.y=c[0]*x.height/100,f=i.y+i.width,B.push(i.width)),F[0]=i,A?(i=r.getSmartText(n[s-1].displayValue,b,x.height),i.x=c[s-1]*x.width/100,m=i.x-i.width,M.push(i.height),u=p):(i=r.getSmartText(n[s-1].displayValue,x.width,b),i.y=c[s-1]*x.height/100,y=i.y-i.height,B.push(i.width),v=f),F[s-1]=i,l=1;l<s-1;l++)i=St,w=n[l].displayValue,A?(g=l+1===s-1?m:c[l+1]*x.width/100,h=c[l]*x.width/100,d=I(h-u,g-h),d>1.5*j.width&&(i=r.getSmartText(w,2*d,x.height),i.x=c[l]*x.width/100,u=d,M.push(i.height))):(g=l+1===s-1?y:c[l+1]*x.height/100,h=c[l]*x.height/100,d=I(h-v,g-h),d>2*j.height&&(i=r.getSmartText(w,x.width,2*d),i.y=c[l]*x.height/100,v=d,B.push(i.width))),F[l]=i;return A?(C=S.apply(Math,M),x.height=C,e.height=C+2*P.v):(O=S.apply(Math,B),x.width=O,e.width=O+2*P.h),E.node.logicArea=x,E.bound=e,e}draw(){var e,t,o,a,r,n,i,l,s,c,d,g,h,b,p=this.conf,u="bottom"===p.legendPosition,m=p.bound&&p.bound.style||{stroke:"none"},f={};2<=arguments.length&&arguments[1]?(a=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),b=i.animationManager,e=i.parentLayer,l=i.colorRange,s=l.getCumulativeValueRatio(),this.getLogicalSpace(a,i),r=this._lSpace,n=r.node.logicArea,g=r.node.smartTexts,this.group=o=b.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:e,component:Et}),this.bound=t=b.setAnimation({el:this.bound||"rect",attr:r.bound,css:m,container:o,component:Et});for(let v=0;v<this.node.length;v++)this.node[v].remove();for(this.node=[],c=0,d=s.length;c<d;c++)h=g[c],h&&(u?(f.y=n.y+h.height/2,f.x=c===d-1?n.x+h.x-h.width/2:c?n.x+h.x:n.x+h.x+h.width/2):(f.x=n.x+h.width/2,f.y=c===d-1?n.y+h.y-h.height/2:c?n.y+h.y:n.y+h.y+h.height/2),this.node.push(b.setAnimation({el:"text",attr:{text:h.text,x:f.x,y:f.y,lineHeight:this._metaStyle.lineHeight,fill:p.style.fill},container:o,component:Et})));return{group:o,bound:t}}}var ao=Yt;function ro(e){let t,o=e.getFromEnv("dataSource").colorrange,a=e.getFromEnv("dataSource").chart.mapbycategory,n="maps"===e.defaultDatasetType,i="TreeMap"===e.getName(),l=e.getFromEnv("legend"),s=e.getFromEnv("gLegend");t=o&&e.config.showLegend?n?o.gradient&&+o.gradient?"gradient":o.color?"icon":"none":i?o.gradient&&"0"!=o.gradient?"gradient":"none":o.gradient&&"0"!=o.gradient&&!+a?"gradient":"icon":"none","gradient"===t?(e.deleteFromEnv("legend"),l&&l.remove(),Object(r["O"])(e,ao,"gLegend",1),s=e.getChildren("gLegend")[0],s.configure(),e.addToEnv("gLegend",s)):"icon"===t?(e.deleteFromEnv("gLegend"),s&&s.remove(),Object(r["O"])(e,G,"legend",1,{showLegend:!0}),l=e.getChildren("legend")[0],l.configure(),e.addToEnv("legend",l)):"none"===t&&(e.deleteFromEnv("gLegend"),e.deleteFromEnv("legend"),s&&s.remove(),l&&l.remove())}var no=function(e){ro(e)};let io,lo=Object(r["W"])({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},H),so="0,100",co={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},go={getMapName:function(){let e=this,t=e.jsVars.instanceAPI,o=t.getName().toLowerCase();return o},getEntityList:function(){let e,t,o,a,r,n,i,l=this,s=l.jsVars.instanceAPI,c=s.getDatasets()||[],d=c.length,g=[];for(e=0;e<d;e++)if(o=c[e]||[],i=o.getName(),"entities"===i){t=o;break}for(e in a=t.components.data,d=a.length,a)a.hasOwnProperty(e)&&(r=a[e]||{},n=r.config||{},g.push({id:n.id,originalId:n.originalId||n.id,label:n.label,shortlabel:n.shortLabel,value:n.value,formattedValue:n.formattedValue,toolText:n.toolText}));return g},getMapAttribute:function(){let e=this;return Object(X["f"])(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),e.getChartAttribute.apply(e,arguments)},exportMap:function(){let e=this;return Object(X["f"])(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),e.exportChart&&e.exportChart.apply(e,arguments)},addMarker:function(e){let t,o,a,r,n=this.jsVars.instanceAPI,i=n.getDatasets()||[],l=i.length;for(t=0;t<l;t++)if(o=i[t]||[],r=o.getName(),"markers"===r){a=o;break}a&&!a.addMarkerItem(e)&&Object(X["f"])(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(e,t){let o,a,r,n,i=this.jsVars.instanceAPI,l=i.getDatasets()||[],s=l.length;for(o=0;o<s;o++)if(a=l[o]||[],n=a.getName(),"markers"===n){r=a;break}r&&e&&(e=(e+po).toLowerCase(),r.updateMarkerItem(e,t))},removeMarker:function(e){let t,o,a,r,n=this.jsVars.instanceAPI,i=n.getDatasets()||[],l=i.length;for(t=0;t<l;t++)if(o=i[t]||[],r=o.getName(),"markers"===r){a=o;break}e&&(e=(e+po).toLowerCase(),a._removeMarkerItem(e))}},ho="none",bo=", ",po="",uo="bottom",mo="circle",fo=window.Math,vo=fo.min,yo=fo.max,Co=function(e,t){let o=Object(r["lb"])(t.getFromEnv("chart-container"),e,t),a=o.chartX,n=o.chartY,i=t.config,l=i.canvasLeft,s=i.canvasTop,c=i.canvasLeft+i.canvasWidth,d=i.canvasHeight+i.canvasTop;return o.insideCanvas=!1,o.originalEvent=e,a>l&&a<c&&n>s&&n<d&&(o.insideCanvas=!0),o};class Oo extends s["a"]{constructor(e,t){for(var o in super(),this.subpalette="",this.key="",this.index=t,e)this.subpalette=lo[e[o]],this[o]=this.subpalette instanceof Array?this.subpalette[t]:this.subpalette,this.key=o}}class xo extends N{constructor(){super(),this.friendlyName="Map",this.revision=1,this.hasCanvas=!0,this.standaloneInit=!1,this.defaultDatasetType="maps",this.defaultSeriesType="geo",this.fireGroupEvent=!0,this.legendposition="right",this.hasGradientLegend=!0,this.isMap=!0,this.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[so,so,so,so,so],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},this.colorPaletteMap=co,this.eiMethods=go,this.registerFactory("legend",no,["canvas"]),this.registerFactory("axis",()=>{},["canvas"]),this.registerFactory("colormanager-decider",It,["legend"]),this.registerFactory("dataset",lt,["colormanager-decider"]),this.registerFactory("canvas",st["a"])}_checkInvalidSpecificData(){return this.config.invalid=!1,!1}__setDefaultConfig(){super.__setDefaultConfig();var e=this.config;e.baseWidth||(e.baseWidth=400),e.baseHeight||(e.baseHeight=300),e.baseScaleFactor||(e.baseScaleFactor=1)}static getName(){return"maps"}static getType(){return"chartAPI"}getName(){return this.config.name||"GEO"}getType(){return"chartAPI"}configureAttributes(e){let t,o=this,a=o.getChildren("colorPalette")&&o.getChildren("colorPalette")[0];t=e.chart=e.chart||e.graph||e.map||{},o.jsonData=e,a||(a=new Oo(this.colorPaletteMap,(0<t.palette&&6>t.palette?t.palette:Object(r["Kb"])(o.paletteIndex,1))-1),o.attachChild(a,"colorPalette")),o.config.skipCanvasDrawing=!0,super.configureAttributes(e),o._parseBackgroundCosmetics()}parseChartAttr(e){let t,o,a,n,i,l=this,s=l.jsonData,c=s.chart||s.map,d=s.markers,g=new Oo(this.colorPaletteMap,(0<c.palette&&6>c.palette?c.palette:Object(r["Kb"])(l.paletteIndex,1))-1),h=Object(r["Ib"])(c.entitybordercolor,c.bordercolor,g.plotbordercolor),b=Object(r["Ib"])(c.entityfillcolor,c.fillcolor,g.plotfillcolor),p=Object(r["Ib"])(c.entityfillalpha,c.fillalpha,g.plotfillalpha),u=Object(r["Ib"])(c.entityfillratio,c.fillratio,g.plotfillratio),m=Object(r["Ib"])(c.entityfillangle,c.fillangle,g.plotfillangle),f=Object(r["Ib"])(c.nullentityfillcolor,c.nullentitycolor,b),v=Object(r["Kb"])(c.usevaluesformarkers,s.markers&&s.markers.items&&s.markers.items.length,!(s.markers&&s.markers.application&&s.markers.application.length&&s.markers.definition&&s.markers.definition.length));super.parseChartAttr(e),t=l.config,t.origMarginTop=Object(r["Kb"])(c.charttopmargin,c.maptopmargin,11),t.origMarginLeft=Object(r["Kb"])(c.chartleftmargin,c.mapleftmargin,11),t.origMarginBottom=Object(r["Kb"])(c.chartbottommargin,c.mapbottommargin,11),t.origMarginRight=Object(r["Kb"])(c.chartrightmargin,c.maprightmargin,11),t.labelsOnTop=Object(r["Kb"])(c.entitylabelsontop,1),i=t.style,o=i.inCancolor,a=i.inCanfontFamily,n=i.inCanfontSize,t.entityOpts={baseScaleFactor:t.baseScaleFactor,dataLabels:{style:{fontFamily:a,fontSize:n,lineHeight:i.inCanLineHeight,color:i.inCancolor}},fillColor:b,fillAlpha:p,fillRatio:u,fillAngle:m,borderColor:h,borderAlpha:Object(r["Ib"])(c.entityborderalpha,c.borderalpha,l.borderAlpha,"100"),borderThickness:Object(r["Kb"])(c.showentityborder,c.showborder,1)?Object(r["Kb"])(c.entityborderthickness,c.borderthickness,1):0,scaleBorder:Object(r["Kb"])(c.scaleentityborder,c.scaleborder,0),hoverFillColor:Object(r["Ib"])(c.entityfillhovercolor,c.hoverfillcolor,c.hovercolor,g.plothoverfillcolor),hoverFillAlpha:Object(r["Ib"])(c.entityfillhoveralpha,c.hoverfillalpha,c.hoveralpha,g.plothoverfillalpha),hoverFillRatio:Object(r["Ib"])(c.entityfillhoverratio,c.hoverfillratio,c.hoverratio,g.plothoverfillratio),hoverFillAngle:Object(r["Ib"])(c.entityfillhoverangle,c.hoverfillangle,c.hoverangle,g.plothoverfillangle),hoverBorderThickness:Object(r["Ib"])(c.entityborderhoverthickness,c.hoverborderthickness),hoverBorderColor:Object(r["Ib"])(c.entityborderhovercolor,h,g.plotbordercolor),hoverBorderAlpha:Object(r["Ib"])(c.entityborderhoveralpha,g.plotborderalpha),nullEntityColor:f,nullEntityAlpha:Object(r["Ib"])(c.nullentityfillalpha,c.nullentityalpha,p),nullEntityRatio:Object(r["Ib"])(c.nullentityfillratio,c.nullentityratio,u),nullEntityAngle:Object(r["Ib"])(c.nullentityfillangle,c.nullentityangle,m),connectorColor:Object(r["Ib"])(c.labelconnectorcolor,c.connectorcolor,o),connectorAlpha:Object(r["Ib"])(c.labelconnectoralpha,c.connectoralpha,"100"),connectorThickness:Object(r["Kb"])(c.labelconnectorthickness,c.borderthickness,1),showHoverEffect:Object(r["Kb"])(c.showentityhovereffect,c.usehovercolor,c.showhovereffect,1),hoverOnNull:Object(r["Kb"])(c.hoveronnull,c.entityhoveronnull,1),labelPadding:Object(r["Kb"])(c.labelpadding,5),showLabels:Object(r["Kb"])(c.showlabels,1),labelsOnTop:Object(r["Kb"])(c.entitylabelsontop,1),includeNameInLabels:Object(r["Kb"])(c.includenameinlabels,1),includeValueInLabels:Object(r["Kb"])(c.includevalueinlabels,0),useSNameInTooltip:Object(r["Kb"])(c.usesnameintooltip,0),useShortName:Object(r["Kb"])(c.usesnameinlabels,1),labelSepChar:Object(r["Ib"])(c.labelsepchar,bo),showTooltip:Object(r["Kb"])(c.showentitytooltip,c.showtooltip,1),tooltipSepChar:Object(r["Ib"])(c.tooltipsepchar,", "),tooltext:c.entitytooltext,hideNullEntities:Object(r["Kb"])(c.hidenullentities,0),showHiddenEntityBorder:Object(r["Kb"])(c.showhiddenentityborder,1),showNullEntityBorder:Object(r["Kb"])(c.shownullentityborder,1),hiddenEntityColor:Object(r["Ib"])(c.hiddenentitycolor,c.hiddenentityfillcolor,c.hiddenentityalpha||c.hiddenentityfillalpha?f:"ffffff"),hiddenEntityAlpha:Object(r["Ib"])(c.hiddenentityalpha,c.hiddenentityfillalpha,.001),shadow:Object(r["Kb"])(c.showshadow,l.defaultPlotShadow,g.shadow)},t.markerOpts={dataLabels:{style:{fontFamily:Object(r["Ib"])(c.markerfont,a),fontSize:Object(r["Kb"])(c.markerfontsize,parseInt(n,10)),fontColor:Object(r["Ib"])(c.markerfontcolor,o)}},showTooltip:Object(r["Kb"])(c.showmarkertooltip,c.showtooltip,1),showLabels:Object(r["Kb"])(c.showmarkerlabels,c.showlabels,1),showHoverEffect:Object(r["Kb"])(c.showmarkerhovereffect,1),labelPadding:Object(r["Ib"])(c.markerlabelpadding,"5"),labelWrapWidth:Object(r["Kb"])(c.markerlabelwrapwidth,0),labelWrapHeight:Object(r["Kb"])(c.markerlabelwrapheight,0),fillColor:Object(r["Ib"])(c.markerfillcolor,c.markerbgcolor,g.markerfillcolor),fillAlpha:Object(r["Ib"])(c.markerfillalpha,g.markerfillalpha),fillAngle:Object(r["Ib"])(c.markerfillangle,g.markerfillangle),fillRatio:Object(r["Ib"])(c.markerfillratio,g.markerfillratio),fillPattern:Object(r["Ib"])(c.markerfillpattern,g.markerbgpattern),hoverFillColor:c.markerfillhovercolor,hoverFillAlpha:c.markerfillhoveralpha,hoverFillRatio:c.markerfillhoverratio,hoverFillAngle:c.markerfillhoverangle,borderThickness:Object(r["Ib"])(c.markerborderthickness,1),borderColor:Object(r["Ib"])(c.markerbordercolor,g.markerbordercolor),borderAlpha:Object(r["Kb"])(c.markerborderalpha,g.markerborderalpha),hoverBorderThickness:c.markerborderhoverthickness,hoverBorderColor:c.markerborderhovercolor,hoverBorderAlpha:c.markerborderhoveralpha,radius:Object(r["Kb"])(c.markerradius&&Object(r["Xb"])(c.markerradius),7),shapeId:Object(r["Ib"])(c.defaultmarkershape,mo),labelSepChar:Object(r["Ib"])(c.labelsepchar,bo),tooltipSepChar:Object(r["Ib"])(c.tooltipsepchar,", "),autoScale:Object(r["Kb"])(c.autoscalemarkers,0),tooltext:Object(r["Ib"])(d&&d.tooltext,c.markertooltext),dataEnabled:v,valueToRadius:Object(r["Kb"])(c.markerradiusfromvalue,1),valueMarkerAlpha:Object(r["Ib"])(c.valuemarkeralpha,"75"),hideNull:Object(r["Kb"])(c.hidenullmarkers,0),nullRadius:Object(r["Kb"])(c.nullmarkerradius,c.markerradius,7),adjustViewPort:Object(r["Kb"])(c.adjustviewportformarkers,0),startAngle:Object(r["Kb"])(c.markerstartangle,90),maxRadius:Object(r["Kb"])(c.maxmarkerradius,0),minRadius:Object(r["Kb"])(c.minmarkerradius,0),applyAll:Object(r["Kb"])(c.applyallmarkers,0),shadow:Object(r["Kb"])(c.showmarkershadow,c.showshadow,0)},t.connectorOpts={showHoverEffect:Object(r["Kb"])(c.showconnectorhovereffect,1),thickness:Object(r["Kb"])(c.connectorthickness,c.markerconnthickness,"2"),color:Object(r["Ib"])(c.connectorcolor,c.markerconncolor,g.markerbordercolor),alpha:Object(r["Ib"])(c.connectoralpha,c.markerconnalpha,"100"),hoverThickness:Object(r["Kb"])(c.connectorhoverthickness,c.connectorthickness,c.markerconnthickness,"2"),hoverColor:Object(r["Ib"])(c.connectorhovercolor,c.connectorcolor,c.markerconncolor,g.markerbordercolor),hoverAlpha:Object(r["Ib"])(c.connectorhoveralpha,c.connectoralpha,c.markerconnalpha,"100"),dashed:Object(r["Kb"])(c.connectordashed,c.markerconndashed,0),dashLen:Object(r["Kb"])(c.connectordashlen,c.markerconndashlen,3),dashGap:Object(r["Kb"])(c.connectordashgap,c.markerconndashgap,2),font:Object(r["Ib"])(c.connectorfont,c.markerconnfont,a),fontColor:Object(r["Ib"])(c.connectorfontcolor,c.markerconnfontcolor,o),fontSize:Object(r["Kb"])(c.connectorfontsize,c.markerconnfontsize,parseInt(n,10)),showLabels:Object(r["Kb"])(c.showconnectorlabels,c.showmarkerlabels,c.showlabels,1),labelBgColor:Object(r["Ib"])(c.connectorlabelbgcolor,c.markerconnlabelbgcolor,g.plotfillcolor),labelBorderColor:Object(r["Ib"])(c.connectorlabelbordercolor,c.markerconnlabelbordercolor,g.markerbordercolor),shadow:Object(r["Kb"])(c.showconnectorshadow,c.showmarkershadow,c.showshadow,0),showTooltip:Object(r["Kb"])(c.showconnectortooltip,c.showmarkertooltip,c.showtooltip,1),tooltext:Object(r["Ib"])(d&&d.connectortooltext,c.connectortooltext),hideOpen:Object(r["Kb"])(c.hideopenconnectors,1)},t.adjustViewPortForMarkers=Object(r["Kb"])(c.adjustviewportformarkers,v)}_attachMouseEvents(){let e=this,t=e.getFromEnv("eventListeners"),o=e.getFromEnv("chart-container");t.push(z["a"].listen(o,r["ub"]?"touchstart":"click",xo.searchMouseMove,e)),t.push(z["a"].listen(window.document,r["ub"]?"touchstart":"mousemove",xo.searchMouseMove,e))}_dispose(){let e=this,t=e.getFromEnv("chart-container");r["ub"]&&(z["a"].unlisten(t,"touchstart",xo.searchMouseMove),z["a"].unlisten(window.document,"touchstart",xo.searchMouseMove)),z["a"].unlisten(t,"click",xo.searchMouseMove),z["a"].unlisten(window.document,"mousemove",xo.searchMouseMove),super._dispose()}static searchMouseMove(e){let t,o=e.data,a=o.config,r=o.getDatasets(),n=r[1],i=n&&n.getFromEnv("toolTipController"),l=n&&n.config.currentToolTip,s=o.config.lastHoveredPoint,c={};o.getFromEnv("chart-container")&&o.config.lastInteractionEvent!==e.originalEvent&&(o.config.lastInteractionEvent=e.originalEvent,(t=Co(e,o))&&t.insideCanvas?(a.lastMouseEvent=e,c={x:t.chartX,y:t.chartY},o._searchNearestNeighbour(c,e)):(s&&n&&n.hoverOutFn.call(s.element),o.config.lastHoveredPoint=null,i&&i.hide(l)))}_searchNearestNeighbour(e,t){let o,a=this,r=a.getDatasets(),n=r[1];if(n){if(!n.components.kDTree)return;o=n.getElement(e),o?n.highlightPoint(o,t):n.highlightPoint(!1,t)}}_createLayers(){super._createLayers(),this._attachMouseEvents()}_parseBackgroundCosmetics(){let e,t=this,o=t.getChildren("background")[0],a=o.config,n=t.getChildren("colorPalette")[0],i=t.getFromEnv("chart-attrib");e=a.showBorder=Object(r["Kb"])(i.showcanvasborder,1),a.borderWidth=e?Object(r["Kb"])(i.canvasborderthickness,1):0,a.borderRadius=a.borderRadius=Object(r["Kb"])(i.canvasborderradius,0),a.borderDashStyle=a.borderDashStyle=Object(r["Kb"])(i.borderdashed,0)?Object(r["db"])(Object(r["Kb"])(i.borderdashlen,4),Object(r["Kb"])(i.borderdashgap,2)):ho,a.borderAlpha=Object(r["Ib"])(i.canvasborderalpha,n.borderAlpha),a.borderColor=a.borderColor=Object(r["P"])(Object(r["Ib"])(i.canvasbordercolor,n&&n.borderColor),a.borderAlpha)}_getBackgroundCosmetics(){let e=this,t=e.getFromEnv("chart-attrib")||e.jsonData.map,o=e.getChildren("colorPalette")[0];return{FCcolor:{color:Object(r["Ib"])(t.bgcolor,t.canvasbgcolor,o.bgcolor),alpha:Object(r["Ib"])(t.bgalpha,t.canvasbgalpha,o.bgalpha),angle:Object(r["Ib"])(t.bgangle,t.canvasbgangle,o.bgangle),ratio:Object(r["Ib"])(t.bgratio,t.canvasbgratio,o.bgratio)}}}_parseCanvasCosmetics(){super._parseCanvasCosmetics();let e=this,t=e.config,o=e.getFromEnv("chart-attrib")||e.jsonData.map,a=e.getChildren("canvas")[0].config;t.origMarginTop=Object(r["Kb"])(o.maptopmargin,11),t.origMarginLeft=Object(r["Kb"])(o.mapleftmargin,11),t.origMarginBottom=Object(r["Kb"])(o.mapbottommargin,11),t.origMarginRight=Object(r["Kb"])(o.maprightmargin,11),t.origCanvasLeftMargin=Object(r["Kb"])(o.canvasleftmargin,0),t.origCanvasRightMargin=Object(r["Kb"])(o.canvasrightmargin,0),t.origCanvasTopMargin=Object(r["Kb"])(o.canvastopmargin,0),t.origCanvasBottomMargin=Object(r["Kb"])(o.canvasbottommargin,0),a.canvasBorderRadius=Object(r["Kb"])(o.canvasborderradius,0),a.origCanvasTopPad=Object(r["Kb"])(o.canvastoppadding,0),a.origCanvasBottomPad=Object(r["Kb"])(o.canvasbottompadding,0),a.origCanvasLeftPad=Object(r["Kb"])(o.canvasleftpadding,0),a.origCanvasRightPad=Object(r["Kb"])(o.canvasrightpadding,0)}preliminaryScaling(){let e,t,o,a=this,r=a.jsonData,n=r.markers&&r.markers.items||[],i=n&&n.length||0,l=1/0,s=1/0,c=-1/0,d=-1/0;for(;i--;)o=n[i],e=+o.x,t=+o.y,l=vo(l,e),s=vo(s,t),c=yo(c,e),d=yo(d,t);return{x:l,y:s,x1:c,y1:d}}getScalingParameters(e,t,o,a){let r,n,i=this,l=e/t,s=o/(e*i.config.baseScaleFactor),c=a/(t*i.config.baseScaleFactor),d=0,g=0;return s>c?(r=c,d+=(o-a*l)/2,n=200/(t*r)):(r=s,g+=(a-o/l)/2,n=200/(e*r)),{scaleFactor:r,strokeWidth:n,translateX:d,translateY:g}}calculateMarkerBounds(e,t,o){let a,r,n,i,l,s,c,d,g,h,b,p,u,m,f=this,v=f.config,y=v.markerOpts,C=f.getDatasets(),O=f.getDataLimits(),x=O.dataMin,w=O.dataMax,k=y.hideNull,j=y.nullRadius,L=y.valueToRadius,F=1/0,I=1/0,S=-1/0,A=-1/0;for(s=0,g=C.length;s<g;s++)d=C[s],c=d.getName(),"markers"===c&&(a=d);if(a)for(s in a.calculateMarkerRadiusLimits(),r=a.config||{},n=r.minRadius,i=r.maxRadius,l=a.components&&a.components.markerObjs||{},l)m=l[s],v=m.config,u=v.definition||{},null!==v.cleanValue?(L&&u.radius===io&&(v.radius=n+(i-n)*(v.cleanValue-x)/(w-x)),p=+v.radius,h=(+u.x+t)*e,b=(+u.y+o)*e,F=vo(F,h-p),I=vo(I,b-p),S=yo(S,h+p),A=yo(A,b+p)):k?v.__hideMarker=!0:null===v.radius&&(v.radius=j);return{x:F,y:I,x1:S,y1:A}}_spaceManager(){let e,t,o,a,n,i,l,s,c,d=this,g=d.config,h=d.getChildren("legend")&&d.getChildren("legend")[0],b=h&&h.config.legendPos,p=d.getFromEnv("chart-attrib"),u=g.showBorder,m=g.origMarginLeft,f=g.origMarginTop,v=d.config.baseWidth,y=d.config.baseHeight,C={},O=0,x=0,w=g.markerOpts,k=g.borderWidth=u?Object(r["Kb"])(p.borderthickness,1):0;d._allocateSpace({top:k,bottom:k,left:k,right:k}),d._allocateSpace(d._manageActionBarSpace&&d._manageActionBarSpace(.225*g.availableHeight)||{}),s="right"===b?.3*g.canvasWidth:.3*g.canvasHeight,g.showLegend&&d._manageLegendSpace(s),e=b===uo?.225*g.canvasHeight:.225*g.canvasWidth,c=d._manageChartMenuBar(e),o=g.canvasWidth,a=g.canvasHeight,w.dataEnabled?(g.adjustViewPortForMarkers?(C=d.preliminaryScaling(),C.x1>v&&(v=C.x1),0>C.x&&(v+=-C.x,O=-C.x),C.y1>y&&(y=C.y1),0>C.y&&(y+=-C.y,x=-C.y),t=d.getScalingParameters(v,y,o,a),C=d.calculateMarkerBounds(t.scaleFactor*d.config.baseScaleFactor,O,x),i=a,l=o,0>C.x&&(m+=-C.x,o+=C.x),0>C.y&&(f+=-C.y,a+=C.y),C.x1>l&&(o-=C.x1-l),C.y1>i&&(a-=C.y1-i)):(t=d.getScalingParameters(v,y,o,a),d.calculateMarkerBounds(t.scaleFactor*d.config.baseScaleFactor,O,x)),t=d.getScalingParameters(v,y,o,a),m+=O*t.scaleFactor*d.config.baseScaleFactor,f+=x*t.scaleFactor*d.config.baseScaleFactor):t=d.getScalingParameters(v,y,o,a),d.config.scalingParams=t,n=t.scaleFactor,t.translateX+=m,t.translateY=t.translateY+f+c.top||0,t.sFactor=n*d.config.baseScaleFactor*100/100,t.transformStr=["t",t.translateX,",",t.translateY,"s",n,",",n,",0,0"].join(""),d.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:t.translateX?t.translateX:0,grpyshift:t.translateY?t.translateY:0,xscale:100*(n?n*d.config.baseScaleFactor:1),yscale:100*(n?n*d.config.baseScaleFactor:1),scaletext:1,options:{useTracker:!0}}}getDataLimits(){let e,t,o,a=this,r=a.getDatasets(),n=r.length,i=1/0,l=-1/0;for(o=0;o<n;o++)e=r[o],t=e.getDataLimits(),i=vo(i,t.min),l=yo(l,t.max);return{dataMin:i,dataMax:l}}getEntityPaths(e){let t,o={},a=this.config.entities;if(e){for(t in a)o[t]=a[t];return o}return a}checkComplete(){let e=this;e.config.entityFlag&&e.config.entitiesReady&&(e.config.entityFlag=!1,e.config.markersDrawn=!0,e.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:e}))}}var wo=xo;o.d(t,"Maps",function(){return wo});t["default"]={name:"maps",type:"package",requiresFusionCharts:!0,extension:e=>e.addDep(wo)}}}]);
//# sourceMappingURL=chunk-2d221e02.1275a585.js.map